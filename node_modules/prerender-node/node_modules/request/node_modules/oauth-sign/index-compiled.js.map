{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var crypto = require('crypto')\n  , qs = require('querystring')\n  ;\n\nfunction sha1 (key, body) {\n  return crypto.createHmac('sha1', key).update(body).digest('base64')\n}\n\nfunction rsa (key, body) {\n  return crypto.createSign(\"RSA-SHA1\").update(body).sign(key, 'base64');\n}\n\nfunction rfc3986 (str) {\n  return encodeURIComponent(str)\n    .replace(/!/g,'%21')\n    .replace(/\\*/g,'%2A')\n    .replace(/\\(/g,'%28')\n    .replace(/\\)/g,'%29')\n    .replace(/'/g,'%27')\n    ;\n}\n\n// Maps object to bi-dimensional array\n// Converts { foo: 'A', bar: [ 'b', 'B' ]} to\n// [ ['foo', 'A'], ['bar', 'b'], ['bar', 'B'] ]\nfunction map (obj) {\n  var key, val, arr = []\n  for (key in obj) {\n    val = obj[key]\n    if (Array.isArray(val))\n      for (var i = 0; i < val.length; i++)\n        arr.push([key, val[i]])\n    else if (typeof val === \"object\")\n      for (var prop in val)\n        arr.push([key + '[' + prop + ']', val[prop]]);\n    else\n      arr.push([key, val])\n  }\n  return arr\n}\n\n// Compare function for sort\nfunction compare (a, b) {\n  return a > b ? 1 : a < b ? -1 : 0\n}\n\nfunction generateBase (httpMethod, base_uri, params) {\n  // adapted from https://dev.twitter.com/docs/auth/oauth and \n  // https://dev.twitter.com/docs/auth/creating-signature\n\n  // Parameter normalization\n  // http://tools.ietf.org/html/rfc5849#section-3.4.1.3.2\n  var normalized = map(params)\n  // 1.  First, the name and value of each parameter are encoded\n  .map(function (p) {\n    return [ rfc3986(p[0]), rfc3986(p[1] || '') ]\n  })\n  // 2.  The parameters are sorted by name, using ascending byte value\n  //     ordering.  If two or more parameters share the same name, they\n  //     are sorted by their value.\n  .sort(function (a, b) {\n    return compare(a[0], b[0]) || compare(a[1], b[1])\n  })\n  // 3.  The name of each parameter is concatenated to its corresponding\n  //     value using an \"=\" character (ASCII code 61) as a separator, even\n  //     if the value is empty.\n  .map(function (p) { return p.join('=') })\n   // 4.  The sorted name/value pairs are concatenated together into a\n   //     single string by using an \"&\" character (ASCII code 38) as\n   //     separator.\n  .join('&')\n\n  var base = [\n    rfc3986(httpMethod ? httpMethod.toUpperCase() : 'GET'),\n    rfc3986(base_uri),\n    rfc3986(normalized)\n  ].join('&')\n\n  return base\n}\n\nfunction hmacsign (httpMethod, base_uri, params, consumer_secret, token_secret) {\n  var base = generateBase(httpMethod, base_uri, params)\n  var key = [\n    consumer_secret || '',\n    token_secret || ''\n  ].map(rfc3986).join('&')\n\n  return sha1(key, base)\n}\n\nfunction rsasign (httpMethod, base_uri, params, private_key, token_secret) {\n  var base = generateBase(httpMethod, base_uri, params)\n  var key = private_key || ''\n\n  return rsa(key, base)\n}\n\nfunction plaintext (consumer_secret, token_secret) {\n  var key = [\n    consumer_secret || '',\n    token_secret || ''\n  ].map(rfc3986).join('&')\n\n  return key\n}\n\nfunction sign (signMethod, httpMethod, base_uri, params, consumer_secret, token_secret) {\n  var method\n  var skipArgs = 1\n\n  switch (signMethod) {\n    case 'RSA-SHA1':\n      method = rsasign\n      break\n    case 'HMAC-SHA1':\n      method = hmacsign\n      break\n    case 'PLAINTEXT':\n      method = plaintext\n      skipArgs = 4\n      break\n    default:\n     throw new Error(\"Signature method not supported: \" + signMethod)\n  }\n\n  return method.apply(null, [].slice.call(arguments, skipArgs))\n}\n\nexports.hmacsign = hmacsign\nexports.rsasign = rsasign\nexports.plaintext = plaintext\nexports.sign = sign\nexports.rfc3986 = rfc3986\nexports.generateBase = generateBase\n\n"]}