{"version":3,"sources":["stringify.js"],"names":[],"mappings":"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","file":"stringify-compiled.js","sourcesContent":["'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort));\n    }\n\n    return keys.join(delimiter);\n};\n"]}