{"version":3,"sources":["uri.js"],"names":[],"mappings":"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","file":"uri-compiled.js","sourcesContent":["// Load modules\r\n\r\nvar Http = require('http');\r\nvar Url = require('url');\r\nvar Code = require('code');\r\nvar Hawk = require('../lib');\r\nvar Hoek = require('hoek');\r\nvar Lab = require('lab');\r\n\r\n\r\n// Declare internals\r\n\r\nvar internals = {};\r\n\r\n\r\n// Test shortcuts\r\n\r\nvar lab = exports.lab = Lab.script();\r\nvar describe = lab.experiment;\r\nvar it = lab.test;\r\nvar expect = Code.expect;\r\n\r\n\r\ndescribe('Uri', function () {\r\n\r\n    var credentialsFunc = function (id, callback) {\r\n\r\n        var credentials = {\r\n            id: id,\r\n            key: 'werxhqb98rpaxn39848xrunpaw3489ruxnpa98w4rxn',\r\n            algorithm: (id === '1' ? 'sha1' : 'sha256'),\r\n            user: 'steve'\r\n        };\r\n\r\n        return callback(null, credentials);\r\n    };\r\n\r\n    it('should generate a bewit then successfully authenticate it', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?a=1&b=2',\r\n            host: 'example.com',\r\n            port: 80\r\n        };\r\n\r\n        credentialsFunc('123456', function (err, credentials1) {\r\n\r\n            var bewit = Hawk.uri.getBewit('http://example.com/resource/4?a=1&b=2', { credentials: credentials1, ttlSec: 60 * 60 * 24 * 365 * 100, ext: 'some-app-data' });\r\n            req.url += '&bewit=' + bewit;\r\n\r\n            Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials2, attributes) {\r\n\r\n                expect(err).to.not.exist();\r\n                expect(credentials2.user).to.equal('steve');\r\n                expect(attributes.ext).to.equal('some-app-data');\r\n                done();\r\n            });\r\n        });\r\n    });\r\n\r\n    it('should generate a bewit then successfully authenticate it (no ext)', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?a=1&b=2',\r\n            host: 'example.com',\r\n            port: 80\r\n        };\r\n\r\n        credentialsFunc('123456', function (err, credentials1) {\r\n\r\n            var bewit = Hawk.uri.getBewit('http://example.com/resource/4?a=1&b=2', { credentials: credentials1, ttlSec: 60 * 60 * 24 * 365 * 100 });\r\n            req.url += '&bewit=' + bewit;\r\n\r\n            Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials2, attributes) {\r\n\r\n                expect(err).to.not.exist();\r\n                expect(credentials2.user).to.equal('steve');\r\n                done();\r\n            });\r\n        });\r\n    });\r\n\r\n    it('should successfully authenticate a request (last param)', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?a=1&b=2&bewit=MTIzNDU2XDQ1MTE0ODQ2MjFcMzFjMmNkbUJFd1NJRVZDOVkva1NFb2c3d3YrdEVNWjZ3RXNmOGNHU2FXQT1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.not.exist();\r\n            expect(credentials.user).to.equal('steve');\r\n            expect(attributes.ext).to.equal('some-app-data');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should successfully authenticate a request (first param)', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MTE0ODQ2MjFcMzFjMmNkbUJFd1NJRVZDOVkva1NFb2c3d3YrdEVNWjZ3RXNmOGNHU2FXQT1cc29tZS1hcHAtZGF0YQ&a=1&b=2',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.not.exist();\r\n            expect(credentials.user).to.equal('steve');\r\n            expect(attributes.ext).to.equal('some-app-data');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should successfully authenticate a request (only param)', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MTE0ODQ2NDFcZm1CdkNWT3MvcElOTUUxSTIwbWhrejQ3UnBwTmo4Y1VrSHpQd3Q5OXJ1cz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.not.exist();\r\n            expect(credentials.user).to.equal('steve');\r\n            expect(attributes.ext).to.equal('some-app-data');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on multiple authentication', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MTE0ODQ2NDFcZm1CdkNWT3MvcElOTUUxSTIwbWhrejQ3UnBwTmo4Y1VrSHpQd3Q5OXJ1cz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080,\r\n            authorization: 'Basic asdasdasdasd'\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Multiple authentications');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on method other than GET', function (done) {\r\n\r\n        credentialsFunc('123456', function (err, credentials1) {\r\n\r\n            var req = {\r\n                method: 'POST',\r\n                url: '/resource/4?filter=a',\r\n                host: 'example.com',\r\n                port: 8080\r\n            };\r\n\r\n            var exp = Math.floor(Hawk.utils.now() / 1000) + 60;\r\n            var ext = 'some-app-data';\r\n            var mac = Hawk.crypto.calculateMac('bewit', credentials1, {\r\n                timestamp: exp,\r\n                nonce: '',\r\n                method: req.method,\r\n                resource: req.url,\r\n                host: req.host,\r\n                port: req.port,\r\n                ext: ext\r\n            });\r\n\r\n            var bewit = credentials1.id + '\\\\' + exp + '\\\\' + mac + '\\\\' + ext;\r\n\r\n            req.url += '&bewit=' + Hoek.base64urlEncode(bewit);\r\n\r\n            Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials2, attributes) {\r\n\r\n                expect(err).to.exist();\r\n                expect(err.output.payload.message).to.equal('Invalid method');\r\n                done();\r\n            });\r\n        });\r\n    });\r\n\r\n    it('should fail on invalid host header', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            headers: {\r\n                host: 'example.com:something'\r\n            }\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Invalid Host header');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on empty bewit', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Empty bewit');\r\n            expect(err.isMissing).to.not.exist();\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on invalid bewit', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=*',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Invalid bewit encoding');\r\n            expect(err.isMissing).to.not.exist();\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on missing bewit', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.not.exist();\r\n            expect(err.isMissing).to.equal(true);\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on invalid bewit structure', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=abc',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Invalid bewit structure');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on empty bewit attribute', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=YVxcY1xk',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Missing bewit attributes');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on missing bewit id attribute', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=XDQ1NTIxNDc2MjJcK0JFbFhQMXhuWjcvd1Nrbm1ldGhlZm5vUTNHVjZNSlFVRHk4NWpTZVJ4VT1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Missing bewit attributes');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on expired access', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?a=1&b=2&bewit=MTIzNDU2XDEzNTY0MTg1ODNcWk1wZlMwWU5KNHV0WHpOMmRucTRydEk3NXNXTjFjeWVITTcrL0tNZFdVQT1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, credentialsFunc, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Access expired');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on credentials function error', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(Hawk.error.badRequest('Boom'));\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Boom');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on credentials function error with credentials', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(Hawk.error.badRequest('Boom'), { some: 'value' });\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Boom');\r\n            expect(credentials.some).to.equal('value');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on null credentials function response', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(null, null);\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Unknown credentials');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on invalid credentials function response', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(null, {});\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.message).to.equal('Invalid credentials');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on invalid credentials function response (unknown algorithm)', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(null, { key: 'xxx', algorithm: 'xxx' });\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.message).to.equal('Unknown algorithm');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('should fail on expired access', function (done) {\r\n\r\n        var req = {\r\n            method: 'GET',\r\n            url: '/resource/4?bewit=MTIzNDU2XDQ1MDk5OTE3MTlcTUE2eWkwRWRwR0pEcWRwb0JkYVdvVDJrL0hDSzA1T0Y3MkhuZlVmVy96Zz1cc29tZS1hcHAtZGF0YQ',\r\n            host: 'example.com',\r\n            port: 8080\r\n        };\r\n\r\n        Hawk.uri.authenticate(req, function (id, callback) {\r\n\r\n            callback(null, { key: 'xxx', algorithm: 'sha256' });\r\n        }, {}, function (err, credentials, attributes) {\r\n\r\n            expect(err).to.exist();\r\n            expect(err.output.payload.message).to.equal('Bad mac');\r\n            done();\r\n        });\r\n    });\r\n\r\n    describe('getBewit()', function () {\r\n\r\n        it('returns a valid bewit value', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: 'xandyandz' });\r\n            expect(bewit).to.equal('MTIzNDU2XDEzNTY0MjA3MDdca3NjeHdOUjJ0SnBQMVQxekRMTlBiQjVVaUtJVTl0T1NKWFRVZEc3WDloOD1ceGFuZHlhbmR6');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid bewit value (explicit port)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com:8080/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: 'xandyandz' });\r\n            expect(bewit).to.equal('MTIzNDU2XDEzNTY0MjA3MDdcaFpiSjNQMmNLRW80a3kwQzhqa1pBa1J5Q1p1ZWc0V1NOYnhWN3ZxM3hIVT1ceGFuZHlhbmR6');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid bewit value (null ext)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: null });\r\n            expect(bewit).to.equal('MTIzNDU2XDEzNTY0MjA3MDdcSUdZbUxnSXFMckNlOEN4dktQczRKbFdJQStValdKSm91d2dBUmlWaENBZz1c');\r\n            done();\r\n        });\r\n\r\n        it('returns a valid bewit value (parsed uri)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit(Url.parse('https://example.com/somewhere/over/the/rainbow'), { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: 'xandyandz' });\r\n            expect(bewit).to.equal('MTIzNDU2XDEzNTY0MjA3MDdca3NjeHdOUjJ0SnBQMVQxekRMTlBiQjVVaUtJVTl0T1NKWFRVZEc3WDloOD1ceGFuZHlhbmR6');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid options', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', 4);\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing uri', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('', { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid uri', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit(5, { credentials: credentials, ttlSec: 300, localtimeOffsetMsec: 1356420407232 - Hawk.utils.now(), ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials (id)', function (done) {\r\n\r\n            var credentials = {\r\n                key: '2983d45yun89q',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 3000, ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing credentials', function (done) {\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { ttlSec: 3000, ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid credentials (key)', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                algorithm: 'sha256'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 3000, ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on invalid algorithm', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'hmac-sha-0'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow', { credentials: credentials, ttlSec: 300, ext: 'xandyandz' });\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n\r\n        it('errors on missing options', function (done) {\r\n\r\n            var credentials = {\r\n                id: '123456',\r\n                key: '2983d45yun89q',\r\n                algorithm: 'hmac-sha-0'\r\n            };\r\n\r\n            var bewit = Hawk.uri.getBewit('https://example.com/somewhere/over/the/rainbow');\r\n            expect(bewit).to.equal('');\r\n            done();\r\n        });\r\n    });\r\n\r\n    describe('authenticateMessage()', function () {\r\n\r\n        it('should generate an authorization then successfully parse it', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.not.exist();\r\n                    expect(credentials2.user).to.equal('steve');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on mismatching host', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example1.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Bad mac');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on stale timestamp', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, { localtimeOffsetMsec: 100000 }, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Stale timestamp');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('overrides timestampSkewSec', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1, localtimeOffsetMsec: 100000 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, { timestampSkewSec: 500 }, function (err, credentials2) {\r\n\r\n                    expect(err).to.not.exist();\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on invalid authorization', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n                delete auth.id;\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Invalid authorization');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on bad hash', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message1', auth, credentialsFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Bad message hash');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on nonce error', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, credentialsFunc, {\r\n                    nonceFunc: function (key, nonce, ts, callback) {\r\n\r\n                        callback(new Error('kaboom'));\r\n                    }\r\n                }, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Invalid nonce');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on credentials error', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                var errFunc = function (id, callback) {\r\n\r\n                    callback(new Error('kablooey'));\r\n                };\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('kablooey');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on missing credentials', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                var errFunc = function (id, callback) {\r\n\r\n                    callback();\r\n                };\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Unknown credentials');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on invalid credentials', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                var errFunc = function (id, callback) {\r\n\r\n                    callback(null, {});\r\n                };\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Invalid credentials');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail authorization on invalid credentials algorithm', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.exist();\r\n\r\n                var errFunc = function (id, callback) {\r\n\r\n                    callback(null, { key: '123', algorithm: '456' });\r\n                };\r\n\r\n                Hawk.server.authenticateMessage('example.com', 8080, 'some message', auth, errFunc, {}, function (err, credentials2) {\r\n\r\n                    expect(err).to.exist();\r\n                    expect(err.message).to.equal('Unknown algorithm');\r\n                    done();\r\n                });\r\n            });\r\n        });\r\n\r\n        it('should fail on missing host', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var auth = Hawk.client.message(null, 8080, 'some message', { credentials: credentials1 });\r\n                expect(auth).to.not.exist();\r\n                done();\r\n            });\r\n        });\r\n\r\n        it('should fail on missing credentials', function (done) {\r\n\r\n            var auth = Hawk.client.message('example.com', 8080, 'some message', {});\r\n            expect(auth).to.not.exist();\r\n            done();\r\n        });\r\n\r\n        it('should fail on invalid algorithm', function (done) {\r\n\r\n            credentialsFunc('123456', function (err, credentials1) {\r\n\r\n                var creds = Hoek.clone(credentials1);\r\n                creds.algorithm = 'blah';\r\n                var auth = Hawk.client.message('example.com', 8080, 'some message', { credentials: creds });\r\n                expect(auth).to.not.exist();\r\n                done();\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n"]}