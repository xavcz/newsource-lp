{"version":3,"sources":["pseudomap.js"],"names":[],"mappings":"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","file":"pseudomap-compiled.js","sourcesContent":["var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n"]}