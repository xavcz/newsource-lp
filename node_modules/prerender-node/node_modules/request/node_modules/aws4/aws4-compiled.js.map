{"version":3,"sources":["aws4.js"],"names":[],"mappings":"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","file":"aws4-compiled.js","sourcesContent":["var aws4 = exports,\n    url = require('url'),\n    querystring = require('querystring'),\n    crypto = require('crypto'),\n    lru = require('lru-cache'),\n    credentialsCache = lru(1000)\n\n// http://docs.amazonwebservices.com/general/latest/gr/signature-version-4.html\n\nfunction hmac(key, string, encoding) {\n  return crypto.createHmac('sha256', key).update(string, 'utf8').digest(encoding)\n}\n\nfunction hash(string, encoding) {\n  return crypto.createHash('sha256').update(string, 'utf8').digest(encoding)\n}\n\n// This function assumes the string has already been percent encoded\nfunction encodeRfc3986(urlEncodedString) {\n  return urlEncodedString.replace(/[!'()*]/g, function(c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n// request: { path | body, [host], [method], [headers], [service], [region] }\n// credentials: { accessKeyId, secretAccessKey, [sessionToken] }\nfunction RequestSigner(request, credentials) {\n\n  if (typeof request === 'string') request = url.parse(request)\n\n  var headers = request.headers = (request.headers || {}),\n      hostParts = this.matchHost(request.hostname || request.host || headers.Host || headers.host)\n\n  this.request = request\n  this.credentials = credentials || this.defaultCredentials()\n\n  this.service = request.service || hostParts[0] || ''\n  this.region = request.region || hostParts[1] || 'us-east-1'\n\n  // SES uses a different domain from the service name\n  if (this.service === 'email') this.service = 'ses'\n\n  if (!request.method && request.body)\n    request.method = 'POST'\n\n  if (!headers.Host && !headers.host) {\n    headers.Host = request.hostname || request.host || this.createHost()\n\n    // If a port is specified explicitly, use it as is\n    if (request.port)\n      headers.Host += ':' + request.port\n  }\n  if (!request.hostname && !request.host)\n    request.hostname = headers.Host || headers.host\n}\n\nRequestSigner.prototype.matchHost = function(host) {\n  var match = (host || '').match(/([^\\.]+)\\.(?:([^\\.]*)\\.)?amazonaws\\.com$/)\n  var hostParts = (match || []).slice(1, 3)\n\n  // ES's hostParts are sometimes the other way round, if the value that is expected\n  // to be region equals ‘es’ switch them back\n  // e.g. search-cluster-name-aaaa00aaaa0aaa0aaaaaaa0aaa.us-east-1.es.amazonaws.com\n  if (hostParts[1] === 'es')\n    hostParts = hostParts.reverse()\n\n  return hostParts\n}\n\n// http://docs.aws.amazon.com/general/latest/gr/rande.html\nRequestSigner.prototype.isSingleRegion = function() {\n  // Special case for S3 and SimpleDB in us-east-1\n  if (['s3', 'sdb'].indexOf(this.service) >= 0 && this.region === 'us-east-1') return true\n\n  return ['cloudfront', 'ls', 'route53', 'iam', 'importexport', 'sts']\n    .indexOf(this.service) >= 0\n}\n\nRequestSigner.prototype.createHost = function() {\n  var region = this.isSingleRegion() ? '' :\n        (this.service === 's3' && this.region !== 'us-east-1' ? '-' : '.') + this.region,\n      service = this.service === 'ses' ? 'email' : this.service\n  return service + region + '.amazonaws.com'\n}\n\nRequestSigner.prototype.prepareRequest = function() {\n  this.parsePath()\n\n  var request = this.request, headers = request.headers, query\n\n  if (request.signQuery) {\n\n    this.parsedPath.query = query = this.parsedPath.query || {}\n\n    if (this.credentials.sessionToken)\n      query['X-Amz-Security-Token'] = this.credentials.sessionToken\n\n    if (this.service === 's3' && !query['X-Amz-Expires'])\n      query['X-Amz-Expires'] = 86400\n\n    if (query['X-Amz-Date'])\n      this.datetime = query['X-Amz-Date']\n    else\n      query['X-Amz-Date'] = this.getDateTime()\n\n    query['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256'\n    query['X-Amz-Credential'] = this.credentials.accessKeyId + '/' + this.credentialString()\n    query['X-Amz-SignedHeaders'] = this.signedHeaders()\n\n  } else {\n\n    if (!request.doNotModifyHeaders) {\n      if (request.body && !headers['Content-Type'] && !headers['content-type'])\n        headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=utf-8'\n\n      if (request.body && !headers['Content-Length'] && !headers['content-length'])\n        headers['Content-Length'] = Buffer.byteLength(request.body)\n\n      if (this.credentials.sessionToken)\n        headers['X-Amz-Security-Token'] = this.credentials.sessionToken\n\n      if (this.service === 's3')\n        headers['X-Amz-Content-Sha256'] = hash(this.request.body || '', 'hex')\n\n      if (headers['X-Amz-Date'])\n        this.datetime = headers['X-Amz-Date']\n      else\n        headers['X-Amz-Date'] = this.getDateTime()\n    }\n\n    delete headers.Authorization\n    delete headers.authorization\n  }\n}\n\nRequestSigner.prototype.sign = function() {\n  if (!this.parsedPath) this.prepareRequest()\n\n  if (this.request.signQuery) {\n    this.parsedPath.query['X-Amz-Signature'] = this.signature()\n  } else {\n    this.request.headers.Authorization = this.authHeader()\n  }\n\n  this.request.path = this.formatPath()\n\n  return this.request\n}\n\nRequestSigner.prototype.getDateTime = function() {\n  if (!this.datetime) {\n    var headers = this.request.headers,\n      date = new Date(headers.Date || headers.date || new Date)\n\n    this.datetime = date.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '')\n  }\n  return this.datetime\n}\n\nRequestSigner.prototype.getDate = function() {\n  return this.getDateTime().substr(0, 8)\n}\n\nRequestSigner.prototype.authHeader = function() {\n  return [\n    'AWS4-HMAC-SHA256 Credential=' + this.credentials.accessKeyId + '/' + this.credentialString(),\n    'SignedHeaders=' + this.signedHeaders(),\n    'Signature=' + this.signature(),\n  ].join(', ')\n}\n\nRequestSigner.prototype.signature = function() {\n  var date = this.getDate(),\n      cacheKey = [this.credentials.secretAccessKey, date, this.region, this.service].join(),\n      kDate, kRegion, kService, kCredentials = credentialsCache.get(cacheKey)\n  if (!kCredentials) {\n    kDate = hmac('AWS4' + this.credentials.secretAccessKey, date)\n    kRegion = hmac(kDate, this.region)\n    kService = hmac(kRegion, this.service)\n    kCredentials = hmac(kService, 'aws4_request')\n    credentialsCache.set(cacheKey, kCredentials)\n  }\n  return hmac(kCredentials, this.stringToSign(), 'hex')\n}\n\nRequestSigner.prototype.stringToSign = function() {\n  return [\n    'AWS4-HMAC-SHA256',\n    this.getDateTime(),\n    this.credentialString(),\n    hash(this.canonicalString(), 'hex'),\n  ].join('\\n')\n}\n\nRequestSigner.prototype.canonicalString = function() {\n  if (!this.parsedPath) this.prepareRequest()\n\n  var pathStr = this.parsedPath.path,\n      query = this.parsedPath.query,\n      queryStr = '',\n      normalizePath = this.service !== 's3',\n      decodePath = this.service === 's3' || this.request.doNotEncodePath,\n      decodeSlashesInPath = this.service === 's3',\n      firstValOnly = this.service === 's3',\n      bodyHash = this.service === 's3' && this.request.signQuery ?\n        'UNSIGNED-PAYLOAD' : hash(this.request.body || '', 'hex')\n\n  if (query) {\n    queryStr = encodeRfc3986(querystring.stringify(Object.keys(query).sort().reduce(function(obj, key) {\n      if (!key) return obj\n      obj[key] = !Array.isArray(query[key]) ? query[key] :\n        (firstValOnly ? query[key][0] : query[key].slice().sort())\n      return obj\n    }, {})))\n  }\n  if (pathStr !== '/') {\n    if (normalizePath) pathStr = pathStr.replace(/\\/{2,}/g, '/')\n    pathStr = pathStr.split('/').reduce(function(path, piece) {\n      if (normalizePath && piece === '..') {\n        path.pop()\n      } else if (!normalizePath || piece !== '.') {\n        if (decodePath) piece = querystring.unescape(piece)\n        path.push(encodeRfc3986(querystring.escape(piece)))\n      }\n      return path\n    }, []).join('/')\n    if (pathStr[0] !== '/') pathStr = '/' + pathStr\n    if (decodeSlashesInPath) pathStr = pathStr.replace(/%2F/g, '/')\n  }\n\n  return [\n    this.request.method || 'GET',\n    pathStr,\n    queryStr,\n    this.canonicalHeaders() + '\\n',\n    this.signedHeaders(),\n    bodyHash,\n  ].join('\\n')\n}\n\nRequestSigner.prototype.canonicalHeaders = function() {\n  var headers = this.request.headers\n  function trimAll(header) {\n    return header.toString().trim().replace(/\\s+/g, ' ')\n  }\n  return Object.keys(headers)\n    .sort(function(a, b) { return a.toLowerCase() < b.toLowerCase() ? -1 : 1 })\n    .map(function(key) { return key.toLowerCase() + ':' + trimAll(headers[key]) })\n    .join('\\n')\n}\n\nRequestSigner.prototype.signedHeaders = function() {\n  return Object.keys(this.request.headers)\n    .map(function(key) { return key.toLowerCase() })\n    .sort()\n    .join(';')\n}\n\nRequestSigner.prototype.credentialString = function() {\n  return [\n    this.getDate(),\n    this.region,\n    this.service,\n    'aws4_request',\n  ].join('/')\n}\n\nRequestSigner.prototype.defaultCredentials = function() {\n  var env = process.env\n  return {\n    accessKeyId: env.AWS_ACCESS_KEY_ID || env.AWS_ACCESS_KEY,\n    secretAccessKey: env.AWS_SECRET_ACCESS_KEY || env.AWS_SECRET_KEY,\n    sessionToken: env.AWS_SESSION_TOKEN,\n  }\n}\n\nRequestSigner.prototype.parsePath = function() {\n  var path = this.request.path || '/',\n      queryIx = path.indexOf('?'),\n      query = null\n\n  if (queryIx >= 0) {\n    query = querystring.parse(path.slice(queryIx + 1))\n    path = path.slice(0, queryIx)\n  }\n\n  // S3 doesn't always encode characters > 127 correctly and\n  // all services don't encode characters > 255 correctly\n  // So if there are non-reserved chars (and it's not already all % encoded), just encode them all\n  if (/[^0-9A-Za-z!'()*\\-._~%/]/.test(path)) {\n    path = path.split('/').map(function(piece) {\n      return querystring.escape(querystring.unescape(piece))\n    }).join('/')\n  }\n\n  this.parsedPath = {\n    path: path,\n    query: query,\n  }\n}\n\nRequestSigner.prototype.formatPath = function() {\n  var path = this.parsedPath.path,\n      query = this.parsedPath.query\n\n  if (!query) return path\n\n  // Services don't support empty query string keys\n  if (query[''] != null) delete query['']\n\n  return path + '?' + encodeRfc3986(querystring.stringify(query))\n}\n\naws4.RequestSigner = RequestSigner\n\naws4.sign = function(request, credentials) {\n  return new RequestSigner(request, credentials).sign()\n}\n"]}