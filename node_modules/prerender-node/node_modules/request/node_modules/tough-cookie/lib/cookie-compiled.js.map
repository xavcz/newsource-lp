{"version":3,"sources":["cookie.js"],"names":[],"mappings":"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","file":"cookie-compiled.js","sourcesContent":["/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\nvar net = require('net');\nvar urlParse = require('url').parse;\nvar pubsuffix = require('./pubsuffix');\nvar Store = require('./store').Store;\nvar MemoryCookieStore = require('./memstore').MemoryCookieStore;\nvar pathMatch = require('./pathMatch').pathMatch;\nvar VERSION = require('../package.json').version;\n\nvar punycode;\ntry {\n  punycode = require('punycode');\n} catch(e) {\n  console.warn(\"cookie: can't load punycode; won't use punycode for domain normalization\");\n}\n\nvar DATE_DELIM = /[\\x09\\x20-\\x2F\\x3B-\\x40\\x5B-\\x60\\x7B-\\x7E]/;\n\n// From RFC6265 S4.1.1\n// note that it excludes \\x3B \";\"\nvar COOKIE_OCTET  = /[\\x21\\x23-\\x2B\\x2D-\\x3A\\x3C-\\x5B\\x5D-\\x7E]/;\nvar COOKIE_OCTETS = new RegExp('^'+COOKIE_OCTET.source+'+$');\n\nvar CONTROL_CHARS = /[\\x00-\\x1F]/;\n\n// Double quotes are part of the value (see: S4.1.1).\n// '\\r', '\\n' and '\\0' should be treated as a terminator in the \"relaxed\" mode\n// (see: https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/parsed_cookie.cc#L60)\n// '=' and ';' are attribute/values separators\n// (see: https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/parsed_cookie.cc#L64)\nvar COOKIE_PAIR = /^(([^=;]+))\\s*=\\s*([^\\n\\r\\0]*)/;\n\n// Used to parse non-RFC-compliant cookies like '=abc' when given the `loose`\n// option in Cookie.parse:\nvar LOOSE_COOKIE_PAIR = /^((?:=)?([^=;]*)\\s*=\\s*)?([^\\n\\r\\0]*)/;\n\n// RFC6265 S4.1.1 defines path value as 'any CHAR except CTLs or \";\"'\n// Note ';' is \\x3B\nvar PATH_VALUE = /[\\x20-\\x3A\\x3C-\\x7E]+/;\n\n// Used for checking whether or not there is a trailing semi-colon\nvar TRAILING_SEMICOLON = /;+$/;\n\nvar DAY_OF_MONTH = /^(\\d{1,2})[^\\d]*$/;\nvar TIME = /^(\\d{1,2})[^\\d]*:(\\d{1,2})[^\\d]*:(\\d{1,2})[^\\d]*$/;\nvar MONTH = /^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i;\n\nvar MONTH_TO_NUM = {\n  jan:0, feb:1, mar:2, apr:3, may:4, jun:5,\n  jul:6, aug:7, sep:8, oct:9, nov:10, dec:11\n};\nvar NUM_TO_MONTH = [\n  'Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'\n];\nvar NUM_TO_DAY = [\n  'Sun','Mon','Tue','Wed','Thu','Fri','Sat'\n];\n\nvar YEAR = /^(\\d{2}|\\d{4})$/; // 2 to 4 digits\n\nvar MAX_TIME = 2147483647000; // 31-bit max\nvar MIN_TIME = 0; // 31-bit min\n\n\n// RFC6265 S5.1.1 date parser:\nfunction parseDate(str) {\n  if (!str) {\n    return;\n  }\n\n  /* RFC6265 S5.1.1:\n   * 2. Process each date-token sequentially in the order the date-tokens\n   * appear in the cookie-date\n   */\n  var tokens = str.split(DATE_DELIM);\n  if (!tokens) {\n    return;\n  }\n\n  var hour = null;\n  var minutes = null;\n  var seconds = null;\n  var day = null;\n  var month = null;\n  var year = null;\n\n  for (var i=0; i<tokens.length; i++) {\n    var token = tokens[i].trim();\n    if (!token.length) {\n      continue;\n    }\n\n    var result;\n\n    /* 2.1. If the found-time flag is not set and the token matches the time\n     * production, set the found-time flag and set the hour- value,\n     * minute-value, and second-value to the numbers denoted by the digits in\n     * the date-token, respectively.  Skip the remaining sub-steps and continue\n     * to the next date-token.\n     */\n    if (seconds === null) {\n      result = TIME.exec(token);\n      if (result) {\n        hour = parseInt(result[1], 10);\n        minutes = parseInt(result[2], 10);\n        seconds = parseInt(result[3], 10);\n        /* RFC6265 S5.1.1.5:\n         * [fail if]\n         * *  the hour-value is greater than 23,\n         * *  the minute-value is greater than 59, or\n         * *  the second-value is greater than 59.\n         */\n        if(hour > 23 || minutes > 59 || seconds > 59) {\n          return;\n        }\n\n        continue;\n      }\n    }\n\n    /* 2.2. If the found-day-of-month flag is not set and the date-token matches\n     * the day-of-month production, set the found-day-of- month flag and set\n     * the day-of-month-value to the number denoted by the date-token.  Skip\n     * the remaining sub-steps and continue to the next date-token.\n     */\n    if (day === null) {\n      result = DAY_OF_MONTH.exec(token);\n      if (result) {\n        day = parseInt(result, 10);\n        /* RFC6265 S5.1.1.5:\n         * [fail if] the day-of-month-value is less than 1 or greater than 31\n         */\n        if(day < 1 || day > 31) {\n          return;\n        }\n        continue;\n      }\n    }\n\n    /* 2.3. If the found-month flag is not set and the date-token matches the\n     * month production, set the found-month flag and set the month-value to\n     * the month denoted by the date-token.  Skip the remaining sub-steps and\n     * continue to the next date-token.\n     */\n    if (month === null) {\n      result = MONTH.exec(token);\n      if (result) {\n        month = MONTH_TO_NUM[result[1].toLowerCase()];\n        continue;\n      }\n    }\n\n    /* 2.4. If the found-year flag is not set and the date-token matches the year\n     * production, set the found-year flag and set the year-value to the number\n     * denoted by the date-token.  Skip the remaining sub-steps and continue to\n     * the next date-token.\n     */\n    if (year === null) {\n      result = YEAR.exec(token);\n      if (result) {\n        year = parseInt(result[0], 10);\n        /* From S5.1.1:\n         * 3.  If the year-value is greater than or equal to 70 and less\n         * than or equal to 99, increment the year-value by 1900.\n         * 4.  If the year-value is greater than or equal to 0 and less\n         * than or equal to 69, increment the year-value by 2000.\n         */\n        if (70 <= year && year <= 99) {\n          year += 1900;\n        } else if (0 <= year && year <= 69) {\n          year += 2000;\n        }\n\n        if (year < 1601) {\n          return; // 5. ... the year-value is less than 1601\n        }\n      }\n    }\n  }\n\n  if (seconds === null || day === null || month === null || year === null) {\n    return; // 5. ... at least one of the found-day-of-month, found-month, found-\n            // year, or found-time flags is not set,\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minutes, seconds));\n}\n\nfunction formatDate(date) {\n  var d = date.getUTCDate(); d = d >= 10 ? d : '0'+d;\n  var h = date.getUTCHours(); h = h >= 10 ? h : '0'+h;\n  var m = date.getUTCMinutes(); m = m >= 10 ? m : '0'+m;\n  var s = date.getUTCSeconds(); s = s >= 10 ? s : '0'+s;\n  return NUM_TO_DAY[date.getUTCDay()] + ', ' +\n    d+' '+ NUM_TO_MONTH[date.getUTCMonth()] +' '+ date.getUTCFullYear() +' '+\n    h+':'+m+':'+s+' GMT';\n}\n\n// S5.1.2 Canonicalized Host Names\nfunction canonicalDomain(str) {\n  if (str == null) {\n    return null;\n  }\n  str = str.trim().replace(/^\\./,''); // S4.1.2.3 & S5.2.3: ignore leading .\n\n  // convert to IDN if any non-ASCII characters\n  if (punycode && /[^\\u0001-\\u007f]/.test(str)) {\n    str = punycode.toASCII(str);\n  }\n\n  return str.toLowerCase();\n}\n\n// S5.1.3 Domain Matching\nfunction domainMatch(str, domStr, canonicalize) {\n  if (str == null || domStr == null) {\n    return null;\n  }\n  if (canonicalize !== false) {\n    str = canonicalDomain(str);\n    domStr = canonicalDomain(domStr);\n  }\n\n  /*\n   * \"The domain string and the string are identical. (Note that both the\n   * domain string and the string will have been canonicalized to lower case at\n   * this point)\"\n   */\n  if (str == domStr) {\n    return true;\n  }\n\n  /* \"All of the following [three] conditions hold:\" (order adjusted from the RFC) */\n\n  /* \"* The string is a host name (i.e., not an IP address).\" */\n  if (net.isIP(str)) {\n    return false;\n  }\n\n  /* \"* The domain string is a suffix of the string\" */\n  var idx = str.indexOf(domStr);\n  if (idx <= 0) {\n    return false; // it's a non-match (-1) or prefix (0)\n  }\n\n  // e.g \"a.b.c\".indexOf(\"b.c\") === 2\n  // 5 === 3+2\n  if (str.length !== domStr.length + idx) { // it's not a suffix\n    return false;\n  }\n\n  /* \"* The last character of the string that is not included in the domain\n  * string is a %x2E (\".\") character.\" */\n  if (str.substr(idx-1,1) !== '.') {\n    return false;\n  }\n\n  return true;\n}\n\n\n// RFC6265 S5.1.4 Paths and Path-Match\n\n/*\n * \"The user agent MUST use an algorithm equivalent to the following algorithm\n * to compute the default-path of a cookie:\"\n *\n * Assumption: the path (and not query part or absolute uri) is passed in.\n */\nfunction defaultPath(path) {\n  // \"2. If the uri-path is empty or if the first character of the uri-path is not\n  // a %x2F (\"/\") character, output %x2F (\"/\") and skip the remaining steps.\n  if (!path || path.substr(0,1) !== \"/\") {\n    return \"/\";\n  }\n\n  // \"3. If the uri-path contains no more than one %x2F (\"/\") character, output\n  // %x2F (\"/\") and skip the remaining step.\"\n  if (path === \"/\") {\n    return path;\n  }\n\n  var rightSlash = path.lastIndexOf(\"/\");\n  if (rightSlash === 0) {\n    return \"/\";\n  }\n\n  // \"4. Output the characters of the uri-path from the first character up to,\n  // but not including, the right-most %x2F (\"/\").\"\n  return path.slice(0, rightSlash);\n}\n\n\nfunction parse(str, options) {\n  if (!options || typeof options !== 'object') {\n    options = {};\n  }\n  str = str.trim();\n\n  // S4.1.1 Trailing semi-colons are not part of the specification.\n  var semiColonCheck = TRAILING_SEMICOLON.exec(str);\n  if (semiColonCheck) {\n    str = str.slice(0, semiColonCheck.index);\n  }\n\n  // We use a regex to parse the \"name-value-pair\" part of S5.2\n  var firstSemi = str.indexOf(';'); // S5.2 step 1\n  var pairRe = options.loose ? LOOSE_COOKIE_PAIR : COOKIE_PAIR;\n  var result = pairRe.exec(firstSemi === -1 ? str : str.substr(0,firstSemi));\n\n  // Rx satisfies the \"the name string is empty\" and \"lacks a %x3D (\"=\")\"\n  // constraints as well as trimming any whitespace.\n  if (!result) {\n    return;\n  }\n\n  var c = new Cookie();\n  if (result[1]) {\n    c.key = result[2].trim();\n  } else {\n    c.key = '';\n  }\n  c.value = result[3].trim();\n  if (CONTROL_CHARS.test(c.key) || CONTROL_CHARS.test(c.value)) {\n    return;\n  }\n\n  if (firstSemi === -1) {\n    return c;\n  }\n\n  // S5.2.3 \"unparsed-attributes consist of the remainder of the set-cookie-string\n  // (including the %x3B (\";\") in question).\" plus later on in the same section\n  // \"discard the first \";\" and trim\".\n  var unparsed = str.slice(firstSemi).replace(/^\\s*;\\s*/,'').trim();\n\n  // \"If the unparsed-attributes string is empty, skip the rest of these\n  // steps.\"\n  if (unparsed.length === 0) {\n    return c;\n  }\n\n  /*\n   * S5.2 says that when looping over the items \"[p]rocess the attribute-name\n   * and attribute-value according to the requirements in the following\n   * subsections\" for every item.  Plus, for many of the individual attributes\n   * in S5.3 it says to use the \"attribute-value of the last attribute in the\n   * cookie-attribute-list\".  Therefore, in this implementation, we overwrite\n   * the previous value.\n   */\n  var cookie_avs = unparsed.split(/\\s*;\\s*/);\n  while (cookie_avs.length) {\n    var av = cookie_avs.shift();\n    var av_sep = av.indexOf('=');\n    var av_key, av_value;\n\n    if (av_sep === -1) {\n      av_key = av;\n      av_value = null;\n    } else {\n      av_key = av.substr(0,av_sep);\n      av_value = av.substr(av_sep+1);\n    }\n\n    av_key = av_key.trim().toLowerCase();\n\n    if (av_value) {\n      av_value = av_value.trim();\n    }\n\n    switch(av_key) {\n    case 'expires': // S5.2.1\n      if (av_value) {\n        var exp = parseDate(av_value);\n        // \"If the attribute-value failed to parse as a cookie date, ignore the\n        // cookie-av.\"\n        if (exp) {\n          // over and underflow not realistically a concern: V8's getTime() seems to\n          // store something larger than a 32-bit time_t (even with 32-bit node)\n          c.expires = exp;\n        }\n      }\n      break;\n\n    case 'max-age': // S5.2.2\n      if (av_value) {\n        // \"If the first character of the attribute-value is not a DIGIT or a \"-\"\n        // character ...[or]... If the remainder of attribute-value contains a\n        // non-DIGIT character, ignore the cookie-av.\"\n        if (/^-?[0-9]+$/.test(av_value)) {\n          var delta = parseInt(av_value, 10);\n          // \"If delta-seconds is less than or equal to zero (0), let expiry-time\n          // be the earliest representable date and time.\"\n          c.setMaxAge(delta);\n        }\n      }\n      break;\n\n    case 'domain': // S5.2.3\n      // \"If the attribute-value is empty, the behavior is undefined.  However,\n      // the user agent SHOULD ignore the cookie-av entirely.\"\n      if (av_value) {\n        // S5.2.3 \"Let cookie-domain be the attribute-value without the leading %x2E\n        // (\".\") character.\"\n        var domain = av_value.trim().replace(/^\\./, '');\n        if (domain) {\n          // \"Convert the cookie-domain to lower case.\"\n          c.domain = domain.toLowerCase();\n        }\n      }\n      break;\n\n    case 'path': // S5.2.4\n      /*\n       * \"If the attribute-value is empty or if the first character of the\n       * attribute-value is not %x2F (\"/\"):\n       *   Let cookie-path be the default-path.\n       * Otherwise:\n       *   Let cookie-path be the attribute-value.\"\n       *\n       * We'll represent the default-path as null since it depends on the\n       * context of the parsing.\n       */\n      c.path = av_value && av_value[0] === \"/\" ? av_value : null;\n      break;\n\n    case 'secure': // S5.2.5\n      /*\n       * \"If the attribute-name case-insensitively matches the string \"Secure\",\n       * the user agent MUST append an attribute to the cookie-attribute-list\n       * with an attribute-name of Secure and an empty attribute-value.\"\n       */\n      c.secure = true;\n      break;\n\n    case 'httponly': // S5.2.6 -- effectively the same as 'secure'\n      c.httpOnly = true;\n      break;\n\n    default:\n      c.extensions = c.extensions || [];\n      c.extensions.push(av);\n      break;\n    }\n  }\n\n  return c;\n}\n\n// avoid the V8 deoptimization monster!\nfunction jsonParse(str) {\n  var obj;\n  try {\n    obj = JSON.parse(str);\n  } catch (e) {\n    return e;\n  }\n  return obj;\n}\n\nfunction fromJSON(str) {\n  if (!str) {\n    return null;\n  }\n\n  var obj;\n  if (typeof str === 'string') {\n    obj = jsonParse(str);\n    if (obj instanceof Error) {\n      return null;\n    }\n  } else {\n    // assume it's an Object\n    obj = str;\n  }\n\n  var c = new Cookie();\n  for (var i=0; i<Cookie.serializableProperties.length; i++) {\n    var prop = Cookie.serializableProperties[i];\n    if (obj[prop] === undefined ||\n        obj[prop] === Cookie.prototype[prop])\n    {\n      continue; // leave as prototype default\n    }\n\n    if (prop === 'expires' ||\n        prop === 'creation' ||\n        prop === 'lastAccessed')\n    {\n      if (obj[prop] === null) {\n        c[prop] = null;\n      } else {\n        c[prop] = obj[prop] == \"Infinity\" ?\n          \"Infinity\" : new Date(obj[prop]);\n      }\n    } else {\n      c[prop] = obj[prop];\n    }\n  }\n\n  return c;\n}\n\n/* Section 5.4 part 2:\n * \"*  Cookies with longer paths are listed before cookies with\n *     shorter paths.\n *\n *  *  Among cookies that have equal-length path fields, cookies with\n *     earlier creation-times are listed before cookies with later\n *     creation-times.\"\n */\n\nfunction cookieCompare(a,b) {\n  var cmp = 0;\n\n  // descending for length: b CMP a\n  var aPathLen = a.path ? a.path.length : 0;\n  var bPathLen = b.path ? b.path.length : 0;\n  cmp = bPathLen - aPathLen;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // ascending for time: a CMP b\n  var aTime = a.creation ? a.creation.getTime() : MAX_TIME;\n  var bTime = b.creation ? b.creation.getTime() : MAX_TIME;\n  cmp = aTime - bTime;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // break ties for the same millisecond (precision of JavaScript's clock)\n  cmp = a.creationIndex - b.creationIndex;\n\n  return cmp;\n}\n\n// Gives the permutation of all possible pathMatch()es of a given path. The\n// array is in longest-to-shortest order.  Handy for indexing.\nfunction permutePath(path) {\n  if (path === '/') {\n    return ['/'];\n  }\n  if (path.lastIndexOf('/') === path.length-1) {\n    path = path.substr(0,path.length-1);\n  }\n  var permutations = [path];\n  while (path.length > 1) {\n    var lindex = path.lastIndexOf('/');\n    if (lindex === 0) {\n      break;\n    }\n    path = path.substr(0,lindex);\n    permutations.push(path);\n  }\n  permutations.push('/');\n  return permutations;\n}\n\nfunction getCookieContext(url) {\n  if (url instanceof Object) {\n    return url;\n  }\n  // NOTE: decodeURI will throw on malformed URIs (see GH-32).\n  // Therefore, we will just skip decoding for such URIs.\n  try {\n    url = decodeURI(url);\n  }\n  catch(err) {\n    // Silently swallow error\n  }\n\n  return urlParse(url);\n}\n\nfunction Cookie(options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function(prop) {\n    if (Cookie.prototype.hasOwnProperty(prop) &&\n        Cookie.prototype[prop] !== options[prop] &&\n        prop.substr(0,1) !== '_')\n    {\n      this[prop] = options[prop];\n    }\n  }, this);\n\n  this.creation = this.creation || new Date();\n\n  // used to break creation ties in cookieCompare():\n  Object.defineProperty(this, 'creationIndex', {\n    configurable: false,\n    enumerable: false, // important for assert.deepEqual checks\n    writable: true,\n    value: ++Cookie.cookiesCreated\n  });\n}\n\nCookie.cookiesCreated = 0; // incremented each time a cookie is created\n\nCookie.parse = parse;\nCookie.fromJSON = fromJSON;\n\nCookie.prototype.key = \"\";\nCookie.prototype.value = \"\";\n\n// the order in which the RFC has them:\nCookie.prototype.expires = \"Infinity\"; // coerces to literal Infinity\nCookie.prototype.maxAge = null; // takes precedence over expires for TTL\nCookie.prototype.domain = null;\nCookie.prototype.path = null;\nCookie.prototype.secure = false;\nCookie.prototype.httpOnly = false;\nCookie.prototype.extensions = null;\n\n// set by the CookieJar:\nCookie.prototype.hostOnly = null; // boolean when set\nCookie.prototype.pathIsDefault = null; // boolean when set\nCookie.prototype.creation = null; // Date when set; defaulted by Cookie.parse\nCookie.prototype.lastAccessed = null; // Date when set\nObject.defineProperty(Cookie.prototype, 'creationIndex', {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: 0\n});\n\nCookie.serializableProperties = Object.keys(Cookie.prototype)\n  .filter(function(prop) {\n    return !(\n      Cookie.prototype[prop] instanceof Function ||\n      prop === 'creationIndex' ||\n      prop.substr(0,1) === '_'\n    );\n  });\n\nCookie.prototype.inspect = function inspect() {\n  var now = Date.now();\n  return 'Cookie=\"'+this.toString() +\n    '; hostOnly='+(this.hostOnly != null ? this.hostOnly : '?') +\n    '; aAge='+(this.lastAccessed ? (now-this.lastAccessed.getTime())+'ms' : '?') +\n    '; cAge='+(this.creation ? (now-this.creation.getTime())+'ms' : '?') +\n    '\"';\n};\n\nCookie.prototype.toJSON = function() {\n  var obj = {};\n\n  var props = Cookie.serializableProperties;\n  for (var i=0; i<props.length; i++) {\n    var prop = props[i];\n    if (this[prop] === Cookie.prototype[prop]) {\n      continue; // leave as prototype default\n    }\n\n    if (prop === 'expires' ||\n        prop === 'creation' ||\n        prop === 'lastAccessed')\n    {\n      if (this[prop] === null) {\n        obj[prop] = null;\n      } else {\n        obj[prop] = this[prop] == \"Infinity\" ? // intentionally not ===\n          \"Infinity\" : this[prop].toISOString();\n      }\n    } else if (prop === 'maxAge') {\n      if (this[prop] !== null) {\n        // again, intentionally not ===\n        obj[prop] = (this[prop] == Infinity || this[prop] == -Infinity) ?\n          this[prop].toString() : this[prop];\n      }\n    } else {\n      if (this[prop] !== Cookie.prototype[prop]) {\n        obj[prop] = this[prop];\n      }\n    }\n  }\n\n  return obj;\n};\n\nCookie.prototype.clone = function() {\n  return fromJSON(this.toJSON());\n};\n\nCookie.prototype.validate = function validate() {\n  if (!COOKIE_OCTETS.test(this.value)) {\n    return false;\n  }\n  if (this.expires != Infinity && !(this.expires instanceof Date) && !parseDate(this.expires)) {\n    return false;\n  }\n  if (this.maxAge != null && this.maxAge <= 0) {\n    return false; // \"Max-Age=\" non-zero-digit *DIGIT\n  }\n  if (this.path != null && !PATH_VALUE.test(this.path)) {\n    return false;\n  }\n\n  var cdomain = this.cdomain();\n  if (cdomain) {\n    if (cdomain.match(/\\.$/)) {\n      return false; // S4.1.2.3 suggests that this is bad. domainMatch() tests confirm this\n    }\n    var suffix = pubsuffix.getPublicSuffix(cdomain);\n    if (suffix == null) { // it's a public suffix\n      return false;\n    }\n  }\n  return true;\n};\n\nCookie.prototype.setExpires = function setExpires(exp) {\n  if (exp instanceof Date) {\n    this.expires = exp;\n  } else {\n    this.expires = parseDate(exp) || \"Infinity\";\n  }\n};\n\nCookie.prototype.setMaxAge = function setMaxAge(age) {\n  if (age === Infinity || age === -Infinity) {\n    this.maxAge = age.toString(); // so JSON.stringify() works\n  } else {\n    this.maxAge = age;\n  }\n};\n\n// gives Cookie header format\nCookie.prototype.cookieString = function cookieString() {\n  var val = this.value;\n  if (val == null) {\n    val = '';\n  }\n  if (this.key === '') {\n    return val;\n  }\n  return this.key+'='+val;\n};\n\n// gives Set-Cookie header format\nCookie.prototype.toString = function toString() {\n  var str = this.cookieString();\n\n  if (this.expires != Infinity) {\n    if (this.expires instanceof Date) {\n      str += '; Expires='+formatDate(this.expires);\n    } else {\n      str += '; Expires='+this.expires;\n    }\n  }\n\n  if (this.maxAge != null && this.maxAge != Infinity) {\n    str += '; Max-Age='+this.maxAge;\n  }\n\n  if (this.domain && !this.hostOnly) {\n    str += '; Domain='+this.domain;\n  }\n  if (this.path) {\n    str += '; Path='+this.path;\n  }\n\n  if (this.secure) {\n    str += '; Secure';\n  }\n  if (this.httpOnly) {\n    str += '; HttpOnly';\n  }\n  if (this.extensions) {\n    this.extensions.forEach(function(ext) {\n      str += '; '+ext;\n    });\n  }\n\n  return str;\n};\n\n// TTL() partially replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere)\n// S5.3 says to give the \"latest representable date\" for which we use Infinity\n// For \"expired\" we use 0\nCookie.prototype.TTL = function TTL(now) {\n  /* RFC6265 S4.1.2.2 If a cookie has both the Max-Age and the Expires\n   * attribute, the Max-Age attribute has precedence and controls the\n   * expiration date of the cookie.\n   * (Concurs with S5.3 step 3)\n   */\n  if (this.maxAge != null) {\n    return this.maxAge<=0 ? 0 : this.maxAge*1000;\n  }\n\n  var expires = this.expires;\n  if (expires != Infinity) {\n    if (!(expires instanceof Date)) {\n      expires = parseDate(expires) || Infinity;\n    }\n\n    if (expires == Infinity) {\n      return Infinity;\n    }\n\n    return expires.getTime() - (now || Date.now());\n  }\n\n  return Infinity;\n};\n\n// expiryTime() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere)\nCookie.prototype.expiryTime = function expiryTime(now) {\n  if (this.maxAge != null) {\n    var relativeTo = now || this.creation || new Date();\n    var age = (this.maxAge <= 0) ? -Infinity : this.maxAge*1000;\n    return relativeTo.getTime() + age;\n  }\n\n  if (this.expires == Infinity) {\n    return Infinity;\n  }\n  return this.expires.getTime();\n};\n\n// expiryDate() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n// elsewhere), except it returns a Date\nCookie.prototype.expiryDate = function expiryDate(now) {\n  var millisec = this.expiryTime(now);\n  if (millisec == Infinity) {\n    return new Date(MAX_TIME);\n  } else if (millisec == -Infinity) {\n    return new Date(MIN_TIME);\n  } else {\n    return new Date(millisec);\n  }\n};\n\n// This replaces the \"persistent-flag\" parts of S5.3 step 3\nCookie.prototype.isPersistent = function isPersistent() {\n  return (this.maxAge != null || this.expires != Infinity);\n};\n\n// Mostly S5.1.2 and S5.2.3:\nCookie.prototype.cdomain =\nCookie.prototype.canonicalizedDomain = function canonicalizedDomain() {\n  if (this.domain == null) {\n    return null;\n  }\n  return canonicalDomain(this.domain);\n};\n\nfunction CookieJar(store, options) {\n  if (typeof options === \"boolean\") {\n    options = {rejectPublicSuffixes: options};\n  } else if (options == null) {\n    options = {};\n  }\n  if (options.rejectPublicSuffixes != null) {\n    this.rejectPublicSuffixes = options.rejectPublicSuffixes;\n  }\n  if (options.looseMode != null) {\n    this.enableLooseMode = options.looseMode;\n  }\n\n  if (!store) {\n    store = new MemoryCookieStore();\n  }\n  this.store = store;\n}\nCookieJar.prototype.store = null;\nCookieJar.prototype.rejectPublicSuffixes = true;\nCookieJar.prototype.enableLooseMode = false;\nvar CAN_BE_SYNC = [];\n\nCAN_BE_SYNC.push('setCookie');\nCookieJar.prototype.setCookie = function(cookie, url, options, cb) {\n  var err;\n  var context = getCookieContext(url);\n  if (options instanceof Function) {\n    cb = options;\n    options = {};\n  }\n\n  var host = canonicalDomain(context.hostname);\n  var loose = this.enableLooseMode;\n  if (options.loose != null) {\n    loose = options.loose;\n  }\n\n  // S5.3 step 1\n  if (!(cookie instanceof Cookie)) {\n    cookie = Cookie.parse(cookie, { loose: loose });\n  }\n  if (!cookie) {\n    err = new Error(\"Cookie failed to parse\");\n    return cb(options.ignoreError ? null : err);\n  }\n\n  // S5.3 step 2\n  var now = options.now || new Date(); // will assign later to save effort in the face of errors\n\n  // S5.3 step 3: NOOP; persistent-flag and expiry-time is handled by getCookie()\n\n  // S5.3 step 4: NOOP; domain is null by default\n\n  // S5.3 step 5: public suffixes\n  if (this.rejectPublicSuffixes && cookie.domain) {\n    var suffix = pubsuffix.getPublicSuffix(cookie.cdomain());\n    if (suffix == null) { // e.g. \"com\"\n      err = new Error(\"Cookie has domain set to a public suffix\");\n      return cb(options.ignoreError ? null : err);\n    }\n  }\n\n  // S5.3 step 6:\n  if (cookie.domain) {\n    if (!domainMatch(host, cookie.cdomain(), false)) {\n      err = new Error(\"Cookie not in this host's domain. Cookie:\"+cookie.cdomain()+\" Request:\"+host);\n      return cb(options.ignoreError ? null : err);\n    }\n\n    if (cookie.hostOnly == null) { // don't reset if already set\n      cookie.hostOnly = false;\n    }\n\n  } else {\n    cookie.hostOnly = true;\n    cookie.domain = host;\n  }\n\n  //S5.2.4 If the attribute-value is empty or if the first character of the\n  //attribute-value is not %x2F (\"/\"):\n  //Let cookie-path be the default-path.\n  if (!cookie.path || cookie.path[0] !== '/') {\n    cookie.path = defaultPath(context.pathname);\n    cookie.pathIsDefault = true;\n  }\n\n  // S5.3 step 8: NOOP; secure attribute\n  // S5.3 step 9: NOOP; httpOnly attribute\n\n  // S5.3 step 10\n  if (options.http === false && cookie.httpOnly) {\n    err = new Error(\"Cookie is HttpOnly and this isn't an HTTP API\");\n    return cb(options.ignoreError ? null : err);\n  }\n\n  var store = this.store;\n\n  if (!store.updateCookie) {\n    store.updateCookie = function(oldCookie, newCookie, cb) {\n      this.putCookie(newCookie, cb);\n    };\n  }\n\n  function withCookie(err, oldCookie) {\n    if (err) {\n      return cb(err);\n    }\n\n    var next = function(err) {\n      if (err) {\n        return cb(err);\n      } else {\n        cb(null, cookie);\n      }\n    };\n\n    if (oldCookie) {\n      // S5.3 step 11 - \"If the cookie store contains a cookie with the same name,\n      // domain, and path as the newly created cookie:\"\n      if (options.http === false && oldCookie.httpOnly) { // step 11.2\n        err = new Error(\"old Cookie is HttpOnly and this isn't an HTTP API\");\n        return cb(options.ignoreError ? null : err);\n      }\n      cookie.creation = oldCookie.creation; // step 11.3\n      cookie.creationIndex = oldCookie.creationIndex; // preserve tie-breaker\n      cookie.lastAccessed = now;\n      // Step 11.4 (delete cookie) is implied by just setting the new one:\n      store.updateCookie(oldCookie, cookie, next); // step 12\n\n    } else {\n      cookie.creation = cookie.lastAccessed = now;\n      store.putCookie(cookie, next); // step 12\n    }\n  }\n\n  store.findCookie(cookie.domain, cookie.path, cookie.key, withCookie);\n};\n\n// RFC6365 S5.4\nCAN_BE_SYNC.push('getCookies');\nCookieJar.prototype.getCookies = function(url, options, cb) {\n  var context = getCookieContext(url);\n  if (options instanceof Function) {\n    cb = options;\n    options = {};\n  }\n\n  var host = canonicalDomain(context.hostname);\n  var path = context.pathname || '/';\n\n  var secure = options.secure;\n  if (secure == null && context.protocol &&\n      (context.protocol == 'https:' || context.protocol == 'wss:'))\n  {\n    secure = true;\n  }\n\n  var http = options.http;\n  if (http == null) {\n    http = true;\n  }\n\n  var now = options.now || Date.now();\n  var expireCheck = options.expire !== false;\n  var allPaths = !!options.allPaths;\n  var store = this.store;\n\n  function matchingCookie(c) {\n    // \"Either:\n    //   The cookie's host-only-flag is true and the canonicalized\n    //   request-host is identical to the cookie's domain.\n    // Or:\n    //   The cookie's host-only-flag is false and the canonicalized\n    //   request-host domain-matches the cookie's domain.\"\n    if (c.hostOnly) {\n      if (c.domain != host) {\n        return false;\n      }\n    } else {\n      if (!domainMatch(host, c.domain, false)) {\n        return false;\n      }\n    }\n\n    // \"The request-uri's path path-matches the cookie's path.\"\n    if (!allPaths && !pathMatch(path, c.path)) {\n      return false;\n    }\n\n    // \"If the cookie's secure-only-flag is true, then the request-uri's\n    // scheme must denote a \"secure\" protocol\"\n    if (c.secure && !secure) {\n      return false;\n    }\n\n    // \"If the cookie's http-only-flag is true, then exclude the cookie if the\n    // cookie-string is being generated for a \"non-HTTP\" API\"\n    if (c.httpOnly && !http) {\n      return false;\n    }\n\n    // deferred from S5.3\n    // non-RFC: allow retention of expired cookies by choice\n    if (expireCheck && c.expiryTime() <= now) {\n      store.removeCookie(c.domain, c.path, c.key, function(){}); // result ignored\n      return false;\n    }\n\n    return true;\n  }\n\n  store.findCookies(host, allPaths ? null : path, function(err,cookies) {\n    if (err) {\n      return cb(err);\n    }\n\n    cookies = cookies.filter(matchingCookie);\n\n    // sorting of S5.4 part 2\n    if (options.sort !== false) {\n      cookies = cookies.sort(cookieCompare);\n    }\n\n    // S5.4 part 3\n    var now = new Date();\n    cookies.forEach(function(c) {\n      c.lastAccessed = now;\n    });\n    // TODO persist lastAccessed\n\n    cb(null,cookies);\n  });\n};\n\nCAN_BE_SYNC.push('getCookieString');\nCookieJar.prototype.getCookieString = function(/*..., cb*/) {\n  var args = Array.prototype.slice.call(arguments,0);\n  var cb = args.pop();\n  var next = function(err,cookies) {\n    if (err) {\n      cb(err);\n    } else {\n      cb(null, cookies\n        .sort(cookieCompare)\n        .map(function(c){\n          return c.cookieString();\n        })\n        .join('; '));\n    }\n  };\n  args.push(next);\n  this.getCookies.apply(this,args);\n};\n\nCAN_BE_SYNC.push('getSetCookieStrings');\nCookieJar.prototype.getSetCookieStrings = function(/*..., cb*/) {\n  var args = Array.prototype.slice.call(arguments,0);\n  var cb = args.pop();\n  var next = function(err,cookies) {\n    if (err) {\n      cb(err);\n    } else {\n      cb(null, cookies.map(function(c){\n        return c.toString();\n      }));\n    }\n  };\n  args.push(next);\n  this.getCookies.apply(this,args);\n};\n\nCAN_BE_SYNC.push('serialize');\nCookieJar.prototype.serialize = function(cb) {\n  var type = this.store.constructor.name;\n  if (type === 'Object') {\n    type = null;\n  }\n\n  // update README.md \"Serialization Format\" if you change this, please!\n  var serialized = {\n    // The version of tough-cookie that serialized this jar. Generally a good\n    // practice since future versions can make data import decisions based on\n    // known past behavior. When/if this matters, use `semver`.\n    version: 'tough-cookie@'+VERSION,\n\n    // add the store type, to make humans happy:\n    storeType: type,\n\n    // CookieJar configuration:\n    rejectPublicSuffixes: !!this.rejectPublicSuffixes,\n\n    // this gets filled from getAllCookies:\n    cookies: []\n  };\n\n  if (!(this.store.getAllCookies &&\n        typeof this.store.getAllCookies === 'function'))\n  {\n    return cb(new Error('store does not support getAllCookies and cannot be serialized'));\n  }\n\n  this.store.getAllCookies(function(err,cookies) {\n    if (err) {\n      return cb(err);\n    }\n\n    serialized.cookies = cookies.map(function(cookie) {\n      // convert to serialized 'raw' cookies\n      cookie = (cookie instanceof Cookie) ? cookie.toJSON() : cookie;\n\n      // Remove the index so new ones get assigned during deserialization\n      delete cookie.creationIndex;\n\n      return cookie;\n    });\n\n    return cb(null, serialized);\n  });\n};\n\n// well-known name that JSON.stringify calls\nCookieJar.prototype.toJSON = function() {\n  return this.serializeSync();\n};\n\n// use the class method CookieJar.deserialize instead of calling this directly\nCAN_BE_SYNC.push('_importCookies');\nCookieJar.prototype._importCookies = function(serialized, cb) {\n  var jar = this;\n  var cookies = serialized.cookies;\n  if (!cookies || !Array.isArray(cookies)) {\n    return cb(new Error('serialized jar has no cookies array'));\n  }\n\n  function putNext(err) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (!cookies.length) {\n      return cb(err, jar);\n    }\n\n    var cookie;\n    try {\n      cookie = fromJSON(cookies.shift());\n    } catch (e) {\n      return cb(e);\n    }\n\n    if (cookie === null) {\n      return putNext(null); // skip this cookie\n    }\n\n    jar.store.putCookie(cookie, putNext);\n  }\n\n  putNext();\n};\n\nCookieJar.deserialize = function(strOrObj, store, cb) {\n  if (arguments.length !== 3) {\n    // store is optional\n    cb = store;\n    store = null;\n  }\n\n  var serialized;\n  if (typeof strOrObj === 'string') {\n    serialized = jsonParse(strOrObj);\n    if (serialized instanceof Error) {\n      return cb(serialized);\n    }\n  } else {\n    serialized = strOrObj;\n  }\n\n  var jar = new CookieJar(store, serialized.rejectPublicSuffixes);\n  jar._importCookies(serialized, function(err) {\n    if (err) {\n      return cb(err);\n    }\n    cb(null, jar);\n  });\n};\n\nCookieJar.deserializeSync = function(strOrObj, store) {\n  var serialized = typeof strOrObj === 'string' ?\n    JSON.parse(strOrObj) : strOrObj;\n  var jar = new CookieJar(store, serialized.rejectPublicSuffixes);\n\n  // catch this mistake early:\n  if (!jar.store.synchronous) {\n    throw new Error('CookieJar store is not synchronous; use async API instead.');\n  }\n\n  jar._importCookiesSync(serialized);\n  return jar;\n};\nCookieJar.fromJSON = CookieJar.deserializeSync;\n\nCAN_BE_SYNC.push('clone');\nCookieJar.prototype.clone = function(newStore, cb) {\n  if (arguments.length === 1) {\n    cb = newStore;\n    newStore = null;\n  }\n\n  this.serialize(function(err,serialized) {\n    if (err) {\n      return cb(err);\n    }\n    CookieJar.deserialize(newStore, serialized, cb);\n  });\n};\n\n// Use a closure to provide a true imperative API for synchronous stores.\nfunction syncWrap(method) {\n  return function() {\n    if (!this.store.synchronous) {\n      throw new Error('CookieJar store is not synchronous; use async API instead.');\n    }\n\n    var args = Array.prototype.slice.call(arguments);\n    var syncErr, syncResult;\n    args.push(function syncCb(err, result) {\n      syncErr = err;\n      syncResult = result;\n    });\n    this[method].apply(this, args);\n\n    if (syncErr) {\n      throw syncErr;\n    }\n    return syncResult;\n  };\n}\n\n// wrap all declared CAN_BE_SYNC methods in the sync wrapper\nCAN_BE_SYNC.forEach(function(method) {\n  CookieJar.prototype[method+'Sync'] = syncWrap(method);\n});\n\nmodule.exports = {\n  CookieJar: CookieJar,\n  Cookie: Cookie,\n  Store: Store,\n  MemoryCookieStore: MemoryCookieStore,\n  parseDate: parseDate,\n  formatDate: formatDate,\n  parse: parse,\n  fromJSON: fromJSON,\n  domainMatch: domainMatch,\n  defaultPath: defaultPath,\n  pathMatch: pathMatch,\n  getPublicSuffix: pubsuffix.getPublicSuffix,\n  cookieCompare: cookieCompare,\n  permuteDomain: require('./permuteDomain').permuteDomain,\n  permutePath: permutePath,\n  canonicalDomain: canonicalDomain\n};\n"]}