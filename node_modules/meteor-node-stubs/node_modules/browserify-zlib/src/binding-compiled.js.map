{"version":3,"sources":["binding.js"],"names":[],"mappings":"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","file":"binding-compiled.js","sourcesContent":["var msg = require('pako/lib/zlib/messages');\nvar zstream = require('pako/lib/zlib/zstream');\nvar zlib_deflate = require('pako/lib/zlib/deflate.js');\nvar zlib_inflate = require('pako/lib/zlib/inflate.js');\nvar constants = require('pako/lib/zlib/constants');\n\nfor (var key in constants) {\n  exports[key] = constants[key];\n}\n\n// zlib modes\nexports.NONE = 0;\nexports.DEFLATE = 1;\nexports.INFLATE = 2;\nexports.GZIP = 3;\nexports.GUNZIP = 4;\nexports.DEFLATERAW = 5;\nexports.INFLATERAW = 6;\nexports.UNZIP = 7;\n\n/**\n * Emulate Node's zlib C++ layer for use by the JS layer in index.js\n */\nfunction Zlib(mode) {\n  if (mode < exports.DEFLATE || mode > exports.UNZIP)\n    throw new TypeError(\"Bad argument\");\n    \n  this.mode = mode;\n  this.init_done = false;\n  this.write_in_progress = false;\n  this.pending_close = false;\n  this.windowBits = 0;\n  this.level = 0;\n  this.memLevel = 0;\n  this.strategy = 0;\n  this.dictionary = null;\n}\n\nZlib.prototype.init = function(windowBits, level, memLevel, strategy, dictionary) {\n  this.windowBits = windowBits;\n  this.level = level;\n  this.memLevel = memLevel;\n  this.strategy = strategy;\n  // dictionary not supported.\n  \n  if (this.mode === exports.GZIP || this.mode === exports.GUNZIP)\n    this.windowBits += 16;\n    \n  if (this.mode === exports.UNZIP)\n    this.windowBits += 32;\n    \n  if (this.mode === exports.DEFLATERAW || this.mode === exports.INFLATERAW)\n    this.windowBits = -this.windowBits;\n    \n  this.strm = new zstream();\n  \n  switch (this.mode) {\n    case exports.DEFLATE:\n    case exports.GZIP:\n    case exports.DEFLATERAW:\n      var status = zlib_deflate.deflateInit2(\n        this.strm,\n        this.level,\n        exports.Z_DEFLATED,\n        this.windowBits,\n        this.memLevel,\n        this.strategy\n      );\n      break;\n    case exports.INFLATE:\n    case exports.GUNZIP:\n    case exports.INFLATERAW:\n    case exports.UNZIP:\n      var status  = zlib_inflate.inflateInit2(\n        this.strm,\n        this.windowBits\n      );\n      break;\n    default:\n      throw new Error(\"Unknown mode \" + this.mode);\n  }\n  \n  if (status !== exports.Z_OK) {\n    this._error(status);\n    return;\n  }\n  \n  this.write_in_progress = false;\n  this.init_done = true;\n};\n\nZlib.prototype.params = function() {\n  throw new Error(\"deflateParams Not supported\");\n};\n\nZlib.prototype._writeCheck = function() {\n  if (!this.init_done)\n    throw new Error(\"write before init\");\n    \n  if (this.mode === exports.NONE)\n    throw new Error(\"already finalized\");\n    \n  if (this.write_in_progress)\n    throw new Error(\"write already in progress\");\n    \n  if (this.pending_close)\n    throw new Error(\"close is pending\");\n};\n\nZlib.prototype.write = function(flush, input, in_off, in_len, out, out_off, out_len) {    \n  this._writeCheck();\n  this.write_in_progress = true;\n  \n  var self = this;\n  process.nextTick(function() {\n    self.write_in_progress = false;\n    var res = self._write(flush, input, in_off, in_len, out, out_off, out_len);\n    self.callback(res[0], res[1]);\n    \n    if (self.pending_close)\n      self.close();\n  });\n  \n  return this;\n};\n\n// set method for Node buffers, used by pako\nfunction bufferSet(data, offset) {\n  for (var i = 0; i < data.length; i++) {\n    this[offset + i] = data[i];\n  }\n}\n\nZlib.prototype.writeSync = function(flush, input, in_off, in_len, out, out_off, out_len) {\n  this._writeCheck();\n  return this._write(flush, input, in_off, in_len, out, out_off, out_len);\n};\n\nZlib.prototype._write = function(flush, input, in_off, in_len, out, out_off, out_len) {\n  this.write_in_progress = true;\n  \n  if (flush !== exports.Z_NO_FLUSH &&\n      flush !== exports.Z_PARTIAL_FLUSH &&\n      flush !== exports.Z_SYNC_FLUSH &&\n      flush !== exports.Z_FULL_FLUSH &&\n      flush !== exports.Z_FINISH &&\n      flush !== exports.Z_BLOCK) {\n    throw new Error(\"Invalid flush value\");\n  }\n  \n  if (input == null) {\n    input = new Buffer(0);\n    in_len = 0;\n    in_off = 0;\n  }\n  \n  if (out._set)\n    out.set = out._set;\n  else\n    out.set = bufferSet;\n  \n  var strm = this.strm;\n  strm.avail_in = in_len;\n  strm.input = input;\n  strm.next_in = in_off;\n  strm.avail_out = out_len;\n  strm.output = out;\n  strm.next_out = out_off;\n  \n  switch (this.mode) {\n    case exports.DEFLATE:\n    case exports.GZIP:\n    case exports.DEFLATERAW:\n      var status = zlib_deflate.deflate(strm, flush);\n      break;\n    case exports.UNZIP:\n    case exports.INFLATE:\n    case exports.GUNZIP:\n    case exports.INFLATERAW:\n      var status = zlib_inflate.inflate(strm, flush);\n      break;\n    default:\n      throw new Error(\"Unknown mode \" + this.mode);\n  }\n  \n  if (status !== exports.Z_STREAM_END && status !== exports.Z_OK) {\n    this._error(status);\n  }\n  \n  this.write_in_progress = false;\n  return [strm.avail_in, strm.avail_out];\n};\n\nZlib.prototype.close = function() {\n  if (this.write_in_progress) {\n    this.pending_close = true;\n    return;\n  }\n  \n  this.pending_close = false;\n  \n  if (this.mode === exports.DEFLATE || this.mode === exports.GZIP || this.mode === exports.DEFLATERAW) {\n    zlib_deflate.deflateEnd(this.strm);\n  } else {\n    zlib_inflate.inflateEnd(this.strm);\n  }\n  \n  this.mode = exports.NONE;\n};\n\nZlib.prototype.reset = function() {\n  switch (this.mode) {\n    case exports.DEFLATE:\n    case exports.DEFLATERAW:\n      var status = zlib_deflate.deflateReset(this.strm);\n      break;\n    case exports.INFLATE:\n    case exports.INFLATERAW:\n      var status = zlib_inflate.inflateReset(this.strm);\n      break;\n  }\n  \n  if (status !== exports.Z_OK) {\n    this._error(status);\n  }\n};\n\nZlib.prototype._error = function(status) {\n  this.onerror(msg[status] + ': ' + this.strm.msg, status);\n  \n  this.write_in_progress = false;\n  if (this.pending_close)\n    this.close();\n};\n\nexports.Zlib = Zlib;\n"]}