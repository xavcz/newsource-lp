{"version":3,"sources":["reporter.js"],"names":[],"mappings":"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","file":"reporter-compiled.js","sourcesContent":["var inherits = require('inherits');\n\nfunction Reporter(options) {\n  this._reporterState = {\n    obj: null,\n    path: [],\n    options: options || {},\n    errors: []\n  };\n}\nexports.Reporter = Reporter;\n\nReporter.prototype.isError = function isError(obj) {\n  return obj instanceof ReporterError;\n};\n\nReporter.prototype.save = function save() {\n  var state = this._reporterState;\n\n  return { obj: state.obj, pathLen: state.path.length };\n};\n\nReporter.prototype.restore = function restore(data) {\n  var state = this._reporterState;\n\n  state.obj = data.obj;\n  state.path = state.path.slice(0, data.pathLen);\n};\n\nReporter.prototype.enterKey = function enterKey(key) {\n  return this._reporterState.path.push(key);\n};\n\nReporter.prototype.leaveKey = function leaveKey(index, key, value) {\n  var state = this._reporterState;\n\n  state.path = state.path.slice(0, index - 1);\n  if (state.obj !== null)\n    state.obj[key] = value;\n};\n\nReporter.prototype.enterObject = function enterObject() {\n  var state = this._reporterState;\n\n  var prev = state.obj;\n  state.obj = {};\n  return prev;\n};\n\nReporter.prototype.leaveObject = function leaveObject(prev) {\n  var state = this._reporterState;\n\n  var now = state.obj;\n  state.obj = prev;\n  return now;\n};\n\nReporter.prototype.error = function error(msg) {\n  var err;\n  var state = this._reporterState;\n\n  var inherited = msg instanceof ReporterError;\n  if (inherited) {\n    err = msg;\n  } else {\n    err = new ReporterError(state.path.map(function(elem) {\n      return '[' + JSON.stringify(elem) + ']';\n    }).join(''), msg.message || msg, msg.stack);\n  }\n\n  if (!state.options.partial)\n    throw err;\n\n  if (!inherited)\n    state.errors.push(err);\n\n  return err;\n};\n\nReporter.prototype.wrapResult = function wrapResult(result) {\n  var state = this._reporterState;\n  if (!state.options.partial)\n    return result;\n\n  return {\n    result: this.isError(result) ? null : result,\n    errors: state.errors\n  };\n};\n\nfunction ReporterError(path, msg) {\n  this.path = path;\n  this.rethrow(msg);\n};\ninherits(ReporterError, Error);\n\nReporterError.prototype.rethrow = function rethrow(msg) {\n  this.message = msg + ' at: ' + (this.path || '(shallow)');\n  Error.captureStackTrace(this, ReporterError);\n\n  return this;\n};\n"]}