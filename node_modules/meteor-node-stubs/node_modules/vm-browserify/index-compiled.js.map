{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var indexOf = require('indexof');\n\nvar Object_keys = function (obj) {\n    if (Object.keys) return Object.keys(obj)\n    else {\n        var res = [];\n        for (var key in obj) res.push(key)\n        return res;\n    }\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nvar defineProp = (function() {\n    try {\n        Object.defineProperty({}, '_', {});\n        return function(obj, name, value) {\n            Object.defineProperty(obj, name, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value: value\n            })\n        };\n    } catch(e) {\n        return function(obj, name, value) {\n            obj[name] = value;\n        };\n    }\n}());\n\nvar globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',\n'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',\n'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',\n'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',\n'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];\n\nfunction Context() {}\nContext.prototype = {};\n\nvar Script = exports.Script = function NodeScript (code) {\n    if (!(this instanceof Script)) return new Script(code);\n    this.code = code;\n};\n\nScript.prototype.runInContext = function (context) {\n    if (!(context instanceof Context)) {\n        throw new TypeError(\"needs a 'context' argument.\");\n    }\n    \n    var iframe = document.createElement('iframe');\n    if (!iframe.style) iframe.style = {};\n    iframe.style.display = 'none';\n    \n    document.body.appendChild(iframe);\n    \n    var win = iframe.contentWindow;\n    var wEval = win.eval, wExecScript = win.execScript;\n\n    if (!wEval && wExecScript) {\n        // win.eval() magically appears when this is called in IE:\n        wExecScript.call(win, 'null');\n        wEval = win.eval;\n    }\n    \n    forEach(Object_keys(context), function (key) {\n        win[key] = context[key];\n    });\n    forEach(globals, function (key) {\n        if (context[key]) {\n            win[key] = context[key];\n        }\n    });\n    \n    var winKeys = Object_keys(win);\n\n    var res = wEval.call(win, this.code);\n    \n    forEach(Object_keys(win), function (key) {\n        // Avoid copying circular objects like `top` and `window` by only\n        // updating existing context properties or new properties in the `win`\n        // that was only introduced after the eval.\n        if (key in context || indexOf(winKeys, key) === -1) {\n            context[key] = win[key];\n        }\n    });\n\n    forEach(globals, function (key) {\n        if (!(key in context)) {\n            defineProp(context, key, win[key]);\n        }\n    });\n    \n    document.body.removeChild(iframe);\n    \n    return res;\n};\n\nScript.prototype.runInThisContext = function () {\n    return eval(this.code); // maybe...\n};\n\nScript.prototype.runInNewContext = function (context) {\n    var ctx = Script.createContext(context);\n    var res = this.runInContext(ctx);\n\n    forEach(Object_keys(ctx), function (key) {\n        context[key] = ctx[key];\n    });\n\n    return res;\n};\n\nforEach(Object_keys(Script.prototype), function (name) {\n    exports[name] = Script[name] = function (code) {\n        var s = Script(code);\n        return s[name].apply(s, [].slice.call(arguments, 1));\n    };\n});\n\nexports.createScript = function (code) {\n    return exports.Script(code);\n};\n\nexports.createContext = Script.createContext = function (context) {\n    var copy = new Context();\n    if(typeof context === 'object') {\n        forEach(Object_keys(context), function (key) {\n            copy[key] = context[key];\n        });\n    }\n    return copy;\n};\n"]}