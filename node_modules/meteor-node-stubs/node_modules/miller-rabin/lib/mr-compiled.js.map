{"version":3,"sources":["mr.js"],"names":[],"mappings":"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","file":"mr-compiled.js","sourcesContent":["var bn = require('bn.js');\nvar brorand = require('brorand');\n\nfunction MillerRabin(rand) {\n  this.rand = rand || new brorand.Rand();\n}\nmodule.exports = MillerRabin;\n\nMillerRabin.create = function create(rand) {\n  return new MillerRabin(rand);\n};\n\nMillerRabin.prototype._rand = function _rand(n) {\n  var len = n.bitLength();\n  var buf = this.rand.generate(Math.ceil(len / 8));\n\n  // Set low bits\n  buf[0] |= 3;\n\n  // Mask high bits\n  var mask = len & 0x7;\n  if (mask !== 0)\n    buf[buf.length - 1] >>= 7 - mask;\n\n  return new bn(buf);\n}\n\nMillerRabin.prototype.test = function test(n, k, cb) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  var n2 = n1.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  var prime = true;\n  for (; k > 0; k--) {\n    var a = this._rand(n2);\n    if (cb)\n      cb(a);\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return false;\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s)\n      return false;\n  }\n\n  return prime;\n};\n\nMillerRabin.prototype.getDivisor = function getDivisor(n, k) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  var n2 = n1.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  for (; k > 0; k--) {\n    var a = this._rand(n2);\n\n    var g = n.gcd(a);\n    if (g.cmpn(1) !== 0)\n      return g;\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return x.fromRed().subn(1).gcd(n);\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s) {\n      x = x.redSqr();\n      return x.fromRed().subn(1).gcd(n);\n    }\n  }\n\n  return false;\n};\n"]}