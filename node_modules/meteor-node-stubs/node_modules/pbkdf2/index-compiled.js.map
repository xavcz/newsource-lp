{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var compat = require('./browser')\nvar crypto = require('crypto')\nvar fork = require('child_process').fork\nvar path = require('path')\n\nvar MAX_ALLOC = Math.pow(2, 30) - 1 // default in iojs\n\nfunction asyncPBKDF2 (password, salt, iterations, keylen, digest, callback) {\n  if (typeof iterations !== 'number') {\n    throw new TypeError('Iterations not a number')\n  }\n\n  if (iterations < 0) {\n    throw new TypeError('Bad iterations')\n  }\n\n  if (typeof keylen !== 'number') {\n    throw new TypeError('Key length not a number')\n  }\n\n  if (keylen < 0 || keylen > MAX_ALLOC) {\n    throw new TypeError('Bad key length')\n  }\n\n  if (typeof password === 'string') {\n    password = new Buffer(password, 'binary')\n  }\n\n  if (typeof salt === 'string') {\n    salt = new Buffer(salt, 'binary')\n  }\n\n  var child = fork(path.resolve(__dirname, 'async-shim.js'))\n\n  child.on('message', function (result) {\n    if (result.type === 'success') {\n      callback(null, new Buffer(result.data, 'hex'))\n    } else if (result.type === 'fail') {\n      callback(new TypeError(result.data))\n    }\n  })\n\n  child.send({\n    password: password.toString('hex'),\n    salt: salt.toString('hex'),\n    iterations: iterations,\n    keylen: keylen,\n    digest: digest\n  })\n}\n\nexports.pbkdf2Sync = function pbkdf2Sync (password, salt, iterations, keylen, digest) {\n  digest = digest || 'sha1'\n\n  if (isNode10()) {\n    if (digest === 'sha1') {\n      return crypto.pbkdf2Sync(password, salt, iterations, keylen)\n    } else {\n      return compat.pbkdf2Sync(password, salt, iterations, keylen, digest)\n    }\n  } else {\n    return crypto.pbkdf2Sync(password, salt, iterations, keylen, digest)\n  }\n}\n\nexports.pbkdf2 = function pbkdf2 (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest\n    digest = 'sha1'\n  }\n\n  if (isNode10()) {\n    if (digest === 'sha1') {\n      return crypto.pbkdf2(password, salt, iterations, keylen, callback)\n    } else {\n      return asyncPBKDF2(password, salt, iterations, keylen, digest, callback)\n    }\n  } else {\n    return crypto.pbkdf2(password, salt, iterations, keylen, digest, callback)\n  }\n}\n\nvar sha1 = '0c60c80f961f0e71f3a9b524af6012062fe037a6e0f0eb94fe8fc46bdc637164'\nvar isNode10Result\n\nfunction isNode10 () {\n  if (typeof isNode10Result === 'undefined') {\n    isNode10Result = crypto.pbkdf2Sync('password', 'salt', 1, 32, 'sha256').toString('hex') === sha1\n  }\n\n  return isNode10Result\n}\n"]}