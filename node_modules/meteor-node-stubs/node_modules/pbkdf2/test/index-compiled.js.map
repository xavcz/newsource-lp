{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var assert = require('assert')\nvar compatNode = require('../')\nvar compatBrowser = require('../browser')\nvar fixtures = require('./fixtures')\n\n// SHA-1 vectors generated by Node.js\n// SHA-256/SHA-512 test vectors from:\n// https://stackoverflow.com/questions/5130513/pbkdf2-hmac-sha2-test-vectors\n// https://stackoverflow.com/questions/15593184/pbkdf2-hmac-sha-512-test-vectors\nfunction runTests(compat, name) {\n  describe(name, function () {\n    var algos = ['sha1', 'sha224', 'sha256',  'sha384', 'sha512']\n    describe('pbkdf2-compat', function() {\n      it('defaults to sha1 and handles buffers', function(done) {\n        compat.pbkdf2(new Buffer('password'), new Buffer('salt'), 1, 32, function (err, result) {\n          assert.equal(result.toString('hex'), \"0c60c80f961f0e71f3a9b524af6012062fe037a6e0f0eb94fe8fc46bdc637164\")\n          done()\n        })\n      })\n\n      describe('pbkdf2', function() {\n        algos.forEach(function(algorithm) {\n          describe(algorithm, function() {\n            fixtures.valid.forEach(function(f) {\n              var key = f.key || new Buffer(f.keyHex, 'hex')\n              var salt = f.salt || new Buffer(f.saltHex, 'hex')\n              var expected = f.results[algorithm]\n\n              it('encodes ' + key + '(' + f.salt + ') with ' + algorithm + ' to ' + expected, function(done) {\n                compat.pbkdf2(key, salt, f.iterations, f.dkLen, algorithm, function(err, result) {\n                  assert.equal(result.toString('hex'), expected)\n\n                  done()\n                })\n              })\n            })\n\n            fixtures.invalid.forEach(function(f) {\n              it('should throw ' + f.exception, function() {\n                assert.throws(function() {\n                  compat.pbkdf2(f.key, f.salt, f.iterations, f.dkLen, f.algo, function (){})\n                }, new RegExp(f.exception))\n              })\n            })\n          })\n        })\n\n        it('should throw if no callback is provided', function() {\n          assert.throws(function() {\n            compat.pbkdf2('password', 'salt', 1, 32, 'sha1')\n          }, /No callback provided to pbkdf2/)\n        })\n      })\n\n      describe('pbkdf2Sync', function() {\n        it('defaults to sha1', function() {\n          var result = compat.pbkdf2Sync('password', 'salt', 1, 32)\n\n          assert.equal(result.toString('hex'), \"0c60c80f961f0e71f3a9b524af6012062fe037a6e0f0eb94fe8fc46bdc637164\")\n        })\n\n        algos.forEach(function(algorithm) {\n          describe(algorithm, function() {\n            fixtures.valid.forEach(function(f) {\n              var key = f.key || new Buffer(f.keyHex, 'hex')\n              var salt = f.salt || new Buffer(f.saltHex, 'hex')\n              var expected = f.results[algorithm]\n\n              it('encodes ' + key + '(' + f.salt + ') with ' + algorithm + ' to ' + expected, function() {\n                var result = compat.pbkdf2Sync(key, salt, f.iterations, f.dkLen, algorithm)\n\n                assert.equal(result.toString('hex'), expected)\n              })\n            })\n\n            fixtures.invalid.forEach(function(f) {\n              it('should throw ' + f.exception, function() {\n                assert.throws(function() {\n                  compat.pbkdf2Sync(f.key, f.salt, f.iterations, f.dkLen, f.algo)\n                }, new RegExp(f.exception))\n              })\n            })\n          })\n        })\n      })\n    })\n  })\n}\n\nrunTests(compatBrowser, 'JavaScript pbkdf2')\nif (compatBrowser !== compatNode) {\n  runTests(compatNode, 'node pbkdf2')\n}\n"]}