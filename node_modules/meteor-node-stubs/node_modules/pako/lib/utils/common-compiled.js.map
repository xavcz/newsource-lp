{"version":3,"sources":["common.js"],"names":[],"mappings":"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","file":"common-compiled.js","sourcesContent":["'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (source.hasOwnProperty(p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs+len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i=0; i<len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function(chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i=0, l=chunks.length; i<l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i=0, l=chunks.length; i<l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i=0; i<len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function(chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n"]}