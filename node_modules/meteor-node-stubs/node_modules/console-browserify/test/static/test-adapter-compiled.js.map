{"version":3,"sources":["test-adapter.js"],"names":[],"mappings":";;AAAA,AAAC,CAAA,YAAY;AACT,QAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA;AAC1B,QAAI,KAAK,GAAG,4BAA4B,CAAA;;AAExC,UAAM,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAA;;AAEnC,aAAS,UAAU,CAAC,MAAM,EAAC;AACvB,YAAI,OAAO,GAAG;AACV,kBAAM,EAAE,CAAC;AACP,kBAAM,EAAE,CAAC;AACT,iBAAK,EAAE,CAAC;AACR,iBAAK,EAAE,EAAE;SACd,CAAA;;AAED,cAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAA;;AAE1B,cAAM,CAAC,oBAAoB,GAAG,UAAS,GAAG,EAAC;AACvC,gBAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;AACxB,gBAAI,CAAC,EAAE;AACH,oBAAI,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAA;AAC1B,oBAAI,IAAI,GAAG;AACP,0BAAM,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC;AACtB,0BAAM,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC;AACtB,yBAAK,EAAE,CAAC;AACR,sBAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AACR,wBAAI,EAAE,CAAC,CAAC,CAAC,CAAC;AACV,yBAAK,EAAE,EAAE;iBACZ,CAAA;;AAED,oBAAI,MAAM,EAAE;AACR,2BAAO,CAAC,MAAM,EAAE,CAAA;iBACnB,MAAM;AACH,2BAAO,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAA;;AAE3B,2BAAO,CAAC,MAAM,EAAE,CAAA;iBACnB;;AAED,uBAAO,CAAC,KAAK,EAAE,CAAA;;;AAGf,sBAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAA;AAChC,uBAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;aAC3B,MAAM,IAAI,GAAG,KAAK,MAAM,IAAI,GAAG,CAAC,KAAK,CAAC,cAAc,CAAC,EAAC;;AAEnD,sBAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAA;aAC3C;;;;;SAKJ,CAAA;KACJ;CACJ,CAAA,EAAE,CAAC","file":"test-adapter-compiled.js","sourcesContent":["(function () {\n    var Testem = window.Testem\n    var regex = /^((?:not )?ok) (\\d+) (.+)$/\n\n    Testem.useCustomAdapter(tapAdapter)\n\n    function tapAdapter(socket){\n        var results = {\n            failed: 0\n            , passed: 0\n            , total: 0\n            , tests: []\n        }\n\n        socket.emit('tests-start')\n\n        Testem.handleConsoleMessage = function(msg){\n            var m = msg.match(regex)\n            if (m) {\n                var passed = m[1] === 'ok'\n                var test = {\n                    passed: passed ? 1 : 0,\n                    failed: passed ? 0 : 1,\n                    total: 1,\n                    id: m[2],\n                    name: m[3],\n                    items: []\n                }\n\n                if (passed) {\n                    results.passed++\n                } else {\n                    console.error(\"failure\", m)\n\n                    results.failed++\n                }\n\n                results.total++\n\n                // console.log(\"emitted test\", test)\n                socket.emit('test-result', test)\n                results.tests.push(test)\n            } else if (msg === '# ok' || msg.match(/^# tests \\d+/)){\n                // console.log(\"emitted all test\")\n                socket.emit('all-test-results', results)\n            }\n\n            // return false if you want to prevent the console message from\n            // going to the console\n            // return false\n        }\n    }\n}())\n"]}