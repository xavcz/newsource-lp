{"version":3,"sources":["_task.js"],"names":[],"mappings":"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","file":"_task-compiled.js","sourcesContent":["var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};"]}