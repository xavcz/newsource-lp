{"version":3,"sources":["PromiseMap.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA,YAAY,CAAC;;AAEb,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;AAAE,MAAI,EAAE,QAAQ,YAAY,WAAW,CAAA,AAAC,EAAE;AAAE,UAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;GAAE;CAAE;;AAEzJ,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;AAErC,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEvC,IAAI,UAAU,GAAG,CAAC,YAAY;AAC5B,WAAS,UAAU,GAAG;AACpB,mBAAe,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;;AAElC,QAAI,CAAC,SAAS,GAAG,EAAE,CAAC;GACrB;;AAED,YAAU,CAAC,SAAS,CAAC,GAAG,GAAG,SAAS,GAAG,CAAC,GAAG,EAAE;AAC3C,WAAO,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,UAAU,EAAE,CAAC;GACtD,CAAC;;AAEF,YAAU,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE;AAChE,QAAI,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AAC7C,KAAC,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,GAAG,SAAS,CAAC,KAAK,EAAE,mCAAmC,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;AACxJ,SAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GACtB,CAAC;;AAEF,YAAU,CAAC,SAAS,CAAC,SAAS,GAAG,SAAS,SAAS,CAAC,GAAG,EAAE,MAAM,EAAE;AAC/D,QAAI,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;AAC7C,KAAC,CAAC,KAAK,CAAC,SAAS,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,GAAG,SAAS,CAAC,KAAK,EAAE,mCAAmC,EAAE,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;AACxJ,SAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;GACtB,CAAC;;AAEF,SAAO,UAAU,CAAC;CACnB,CAAA,EAAG,CAAC;;AAEL,SAAS,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE;AACjC,MAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AAChC,WAAO,CAAC,GAAG,CAAC,GAAG,IAAI,QAAQ,EAAE,CAAC;GAC/B;AACD,SAAO,OAAO,CAAC,GAAG,CAAC,CAAC;CACrB;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC","file":"PromiseMap-compiled.js","sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule PromiseMap\n * \n */\n\n/**\n * A map of asynchronous values that can be get or set in any order. Unlike a\n * normal map, setting the value for a particular key more than once throws.\n * Also unlike a normal map, a key can either be resolved or rejected.\n */\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Deferred = require('./Deferred');\n\nvar invariant = require('./invariant');\n\nvar PromiseMap = (function () {\n  function PromiseMap() {\n    _classCallCheck(this, PromiseMap);\n\n    this._deferred = {};\n  }\n\n  PromiseMap.prototype.get = function get(key) {\n    return getDeferred(this._deferred, key).getPromise();\n  };\n\n  PromiseMap.prototype.resolveKey = function resolveKey(key, value) {\n    var entry = getDeferred(this._deferred, key);\n    !!entry.isSettled() ? process.env.NODE_ENV !== 'production' ? invariant(false, 'PromiseMap: Already settled `%s`.', key) : invariant(false) : undefined;\n    entry.resolve(value);\n  };\n\n  PromiseMap.prototype.rejectKey = function rejectKey(key, reason) {\n    var entry = getDeferred(this._deferred, key);\n    !!entry.isSettled() ? process.env.NODE_ENV !== 'production' ? invariant(false, 'PromiseMap: Already settled `%s`.', key) : invariant(false) : undefined;\n    entry.reject(reason);\n  };\n\n  return PromiseMap;\n})();\n\nfunction getDeferred(entries, key) {\n  if (!entries.hasOwnProperty(key)) {\n    entries[key] = new Deferred();\n  }\n  return entries[key];\n}\n\nmodule.exports = PromiseMap;"]}