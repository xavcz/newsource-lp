{"version":3,"sources":["$.collection-strong.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,IAAI,CAAC,GAAc,OAAO,CAAC,KAAK,CAAC;IAC7B,IAAI,GAAW,OAAO,CAAC,UAAU,CAAC;IAClC,WAAW,GAAI,OAAO,CAAC,kBAAkB,CAAC;IAC1C,GAAG,GAAY,OAAO,CAAC,SAAS,CAAC;IACjC,SAAS,GAAM,OAAO,CAAC,gBAAgB,CAAC;IACxC,OAAO,GAAQ,OAAO,CAAC,aAAa,CAAC;IACrC,KAAK,GAAU,OAAO,CAAC,YAAY,CAAC;IACpC,WAAW,GAAI,OAAO,CAAC,iBAAiB,CAAC;IACzC,IAAI,GAAW,OAAO,CAAC,eAAe,CAAC;IACvC,EAAE,GAAa,OAAO,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;IACvC,IAAI,GAAW,OAAO,CAAC,SAAS,CAAC;IACjC,QAAQ,GAAO,OAAO,CAAC,eAAe,CAAC;IACvC,UAAU,GAAK,OAAO,CAAC,iBAAiB,CAAC;IACzC,WAAW,GAAI,OAAO,CAAC,iBAAiB,CAAC;IACzC,YAAY,GAAG,MAAM,CAAC,YAAY,IAAI,QAAQ;IAC9C,IAAI,GAAW,WAAW,GAAG,IAAI,GAAG,MAAM;IAC1C,EAAE,GAAa,CAAC,CAAC;;AAErB,IAAI,OAAO,GAAG,SAAV,OAAO,CAAY,EAAE,EAAE,MAAM,EAAC;;AAEhC,MAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAC,OAAO,OAAO,EAAE,IAAI,QAAQ,GAAG,EAAE,GAAG,CAAC,OAAO,EAAE,IAAI,QAAQ,GAAG,GAAG,GAAG,GAAG,CAAA,GAAI,EAAE,CAAC;AAC9F,MAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,EAAC;;AAEf,QAAG,CAAC,YAAY,CAAC,EAAE,CAAC,EAAC,OAAO,GAAG,CAAC;;AAEhC,QAAG,CAAC,MAAM,EAAC,OAAO,GAAG,CAAC;;AAEtB,QAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;;GAEpB,AAAC,OAAO,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;CACvB,CAAC;;AAEF,IAAI,QAAQ,GAAG,SAAX,QAAQ,CAAY,IAAI,EAAE,GAAG,EAAC;;AAEhC,MAAI,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC;MAAE,KAAK,CAAC;AAChC,MAAG,KAAK,KAAK,GAAG,EAAC,OAAO,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;;AAEvC,OAAI,KAAK,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,CAAC,CAAC,EAAC;AAC1C,QAAG,KAAK,CAAC,CAAC,IAAI,GAAG,EAAC,OAAO,KAAK,CAAC;GAChC;CACF,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG;AACf,gBAAc,EAAE,wBAAS,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAC;AACpD,QAAI,CAAC,GAAG,OAAO,CAAC,UAAS,IAAI,EAAE,QAAQ,EAAC;AACtC,eAAS,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;AACzB,UAAI,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,UAAI,CAAC,EAAE,GAAG,SAAS,CAAC;AACpB,UAAI,CAAC,EAAE,GAAG,SAAS,CAAC;AACpB,UAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACf,UAAG,QAAQ,IAAI,SAAS,EAAC,KAAK,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;KACrE,CAAC,CAAC;AACH,eAAW,CAAC,CAAC,CAAC,SAAS,EAAE;;;AAGvB,WAAK,EAAE,SAAS,KAAK,GAAE;AACrB,aAAI,IAAI,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,CAAC,CAAC,EAAC;AAC3E,eAAK,CAAC,CAAC,GAAG,IAAI,CAAC;AACf,cAAG,KAAK,CAAC,CAAC,EAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;AAC3C,iBAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACtB;AACD,YAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC;AAC9B,YAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;OAChB;;;AAGD,cAAQ,EAAE,iBAAS,GAAG,EAAC;AACrB,YAAI,IAAI,GAAI,IAAI;YACZ,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AAChC,YAAG,KAAK,EAAC;AACP,cAAI,IAAI,GAAG,KAAK,CAAC,CAAC;cACd,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;AACnB,iBAAO,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACxB,eAAK,CAAC,CAAC,GAAG,IAAI,CAAC;AACf,cAAG,IAAI,EAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;AACtB,cAAG,IAAI,EAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;AACtB,cAAG,IAAI,CAAC,EAAE,IAAI,KAAK,EAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AACnC,cAAG,IAAI,CAAC,EAAE,IAAI,KAAK,EAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AACnC,cAAI,CAAC,IAAI,CAAC,EAAE,CAAC;SACd,AAAC,OAAO,CAAC,CAAC,KAAK,CAAC;OAClB;;;AAGD,aAAO,EAAE,SAAS,OAAO,CAAC,UAAU,0BAAyB;AAC3D,YAAI,CAAC,GAAG,GAAG,CAAC,UAAU,EAAE,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,EAAE,CAAC,CAAC;YACvE,KAAK,CAAC;AACV,eAAM,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,EAAC;AACtC,WAAC,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;;AAE1B,iBAAM,KAAK,IAAI,KAAK,CAAC,CAAC,EAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;SACxC;OACF;;;AAGD,SAAG,EAAE,SAAS,GAAG,CAAC,GAAG,EAAC;AACpB,eAAO,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;OAC9B;KACF,CAAC,CAAC;AACH,QAAG,WAAW,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,EAAE,MAAM,EAAE;AAC5C,SAAG,EAAE,eAAU;AACb,eAAO,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;OAC5B;KACF,CAAC,CAAC;AACH,WAAO,CAAC,CAAC;GACV;AACD,KAAG,EAAE,aAAS,IAAI,EAAE,GAAG,EAAE,KAAK,EAAC;AAC7B,QAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC;QAC3B,IAAI;QAAE,KAAK,CAAC;;AAEhB,QAAG,KAAK,EAAC;AACP,WAAK,CAAC,CAAC,GAAG,KAAK,CAAC;;KAEjB,MAAM;AACL,YAAI,CAAC,EAAE,GAAG,KAAK,GAAG;AAChB,WAAC,EAAE,KAAK,GAAG,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC;AAC7B,WAAC,EAAE,GAAG;AACN,WAAC,EAAE,KAAK;AACR,WAAC,EAAE,IAAI,GAAG,IAAI,CAAC,EAAE;AACjB,WAAC,EAAE,SAAS;AACZ,WAAC,EAAE,KAAK;SACT,CAAC;AACF,YAAG,CAAC,IAAI,CAAC,EAAE,EAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC;AAC5B,YAAG,IAAI,EAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;AACvB,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC;;AAEb,YAAG,KAAK,KAAK,GAAG,EAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;OACzC,AAAC,OAAO,IAAI,CAAC;GACf;AACD,UAAQ,EAAE,QAAQ;AAClB,WAAS,EAAE,mBAAS,CAAC,EAAE,IAAI,EAAE,MAAM,EAAC;;;AAGlC,eAAW,CAAC,CAAC,EAAE,IAAI,EAAE,UAAS,QAAQ,EAAE,IAAI,EAAC;AAC3C,UAAI,CAAC,EAAE,GAAG,QAAQ,CAAC;AACnB,UAAI,CAAC,EAAE,GAAG,IAAI,CAAC;AACf,UAAI,CAAC,EAAE,GAAG,SAAS,CAAC;KACrB,EAAE,YAAU;AACX,UAAI,IAAI,GAAI,IAAI;UACZ,IAAI,GAAI,IAAI,CAAC,EAAE;UACf,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;;AAEpB,aAAM,KAAK,IAAI,KAAK,CAAC,CAAC,EAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;;AAEvC,UAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAA,AAAC,EAAC;;AAE/D,YAAI,CAAC,EAAE,GAAG,SAAS,CAAC;AACpB,eAAO,IAAI,CAAC,CAAC,CAAC,CAAC;OAChB;;AAED,UAAG,IAAI,IAAI,MAAM,EAAG,OAAO,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5C,UAAG,IAAI,IAAI,QAAQ,EAAC,OAAO,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5C,aAAO,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;KACpC,EAAE,MAAM,GAAG,SAAS,GAAG,QAAQ,EAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;;AAGlD,cAAU,CAAC,IAAI,CAAC,CAAC;GAClB;CACF,CAAC","file":"$.collection-strong-compiled.js","sourcesContent":["'use strict';\nvar $            = require('./$')\n  , hide         = require('./$.hide')\n  , redefineAll  = require('./$.redefine-all')\n  , ctx          = require('./$.ctx')\n  , strictNew    = require('./$.strict-new')\n  , defined      = require('./$.defined')\n  , forOf        = require('./$.for-of')\n  , $iterDefine  = require('./$.iter-define')\n  , step         = require('./$.iter-step')\n  , ID           = require('./$.uid')('id')\n  , $has         = require('./$.has')\n  , isObject     = require('./$.is-object')\n  , setSpecies   = require('./$.set-species')\n  , DESCRIPTORS  = require('./$.descriptors')\n  , isExtensible = Object.isExtensible || isObject\n  , SIZE         = DESCRIPTORS ? '_s' : 'size'\n  , id           = 0;\n\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!$has(it, ID)){\n    // can't set id to frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add id\n    if(!create)return 'E';\n    // add missing object id\n    hide(it, ID, ++id);\n  // return object id with prefix\n  } return 'O' + it[ID];\n};\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      strictNew(that, C, NAME);\n      that._i = $.create(null); // index\n      that._f = undefined;      // first entry\n      that._l = undefined;      // last entry\n      that[SIZE] = 0;           // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};"]}