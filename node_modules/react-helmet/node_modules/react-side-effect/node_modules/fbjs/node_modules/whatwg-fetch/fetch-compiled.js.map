{"version":3,"sources":["fetch.js"],"names":[],"mappings":"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","file":"fetch-compiled.js","sourcesContent":["(function() {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = name.toString();\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = value.toString();\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(url, options) {\n    options = options || {}\n    this.url = url\n\n    this.credentials = options.credentials || 'omit'\n    this.headers = new Headers(options.headers)\n    this.method = normalizeMethod(options.method || 'GET')\n    this.mode = options.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && options.body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(options.body)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this._initBody(bodyInit)\n    this.type = 'default'\n    this.url = null\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n  }\n\n  Body.call(Response.prototype)\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    // TODO: Request constructor should accept input, init\n    var request\n    if (Request.prototype.isPrototypeOf(input) && !init) {\n      request = input\n    } else {\n      request = new Request(input, init)\n    }\n\n    return new Promise(function(resolve, reject) {\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})();\n"]}